<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Travel App UI
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <script>
    // Firebase init - replace with your own config later
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      appId: "YOUR_APP_ID"
    };
    try { firebase.initializeApp(firebaseConfig); } catch (e) {}
    const auth = firebase.auth?.();
    const googleProvider = auth ? new firebase.auth.GoogleAuthProvider() : null;

    let currentUser = null;

    function openAuthModal() {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      modal.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 w-full max-w-md">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">Sign in / Sign up</h3>
            <button class="text-gray-500 text-xl" onclick="this.closest('.fixed').remove()">×</button>
          </div>
          <div class="space-y-3">
            <div id="gsi-container" class="w-full flex justify-center"></div>
            <div class="text-[11px] text-gray-500 text-center">or fill your details</div>
            <div class="grid grid-cols-2 gap-2">
              <input id="reg-name" class="bg-white border border-gray-200 rounded-lg py-2 px-3 text-sm" placeholder="Full name"/>
              <input id="reg-age" class="bg-white border border-gray-200 rounded-lg py-2 px-3 text-sm" placeholder="Age" type="number"/>
              <select id="reg-gender" class="bg-white border border-gray-200 rounded-lg py-2 px-3 text-sm">
                <option>Gender</option>
                <option>Male</option>
                <option>Female</option>
                <option>Other</option>
              </select>
              <input id="reg-phone" class="bg-white border border-gray-200 rounded-lg py-2 px-3 text-sm" placeholder="Phone"/>
              <input id="reg-address" class="col-span-2 bg-white border border-gray-200 rounded-lg py-2 px-3 text-sm" placeholder="Home address"/>
              <input id="reg-city" class="bg-white border border-gray-200 rounded-lg py-2 px-3 text-sm" placeholder="City"/>
              <input id="reg-state" class="bg-white border border-gray-200 rounded-lg py-2 px-3 text-sm" placeholder="State" value="Kerala"/>
              <input id="reg-country" class="bg-white border border-gray-200 rounded-lg py-2 px-3 text-sm" placeholder="Country" value="India"/>
              <input id="reg-pincode" class="bg-white border border-gray-200 rounded-lg py-2 px-3 text-sm" placeholder="Pincode"/>
            </div>
            <button class="w-full bg-green-700 hover:bg-green-800 text-white py-2 rounded-lg" onclick="completeManualSignup()">Continue</button>
          </div>
        </div>`;
      document.body.appendChild(modal);
      // Render Google Sign-In button if the GSI library is available
      if (window.google?.accounts?.id) {
        window.google.accounts.id.renderButton(
          document.getElementById('gsi-container'),
          { theme: 'outline', size: 'large', width: 320 }
        );
        // Also show One Tap if appropriate
        window.google.accounts.id.prompt();
      }
    }

    function signInWithGoogle() {
      if (!auth || !googleProvider) { alert('Auth not initialized.'); return; }
      auth.signInWithPopup(googleProvider)
        .then(result => {
          currentUser = result.user;
          localStorage.setItem('userProfile', JSON.stringify({
            uid: currentUser.uid,
            name: currentUser.displayName,
            email: currentUser.email,
            photoURL: currentUser.photoURL
          }));
          refreshProfileUI();
          document.querySelector('.fixed.inset-0')?.remove();
        })
        .catch(() => alert('Google sign-in failed. Check your config.'));
    }

    function completeManualSignup() {
      const profile = {
        name: document.getElementById('reg-name')?.value || '',
        age: document.getElementById('reg-age')?.value || '',
        gender: document.getElementById('reg-gender')?.value || '',
        phone: document.getElementById('reg-phone')?.value || '',
        address: document.getElementById('reg-address')?.value || '',
        city: document.getElementById('reg-city')?.value || '',
        state: document.getElementById('reg-state')?.value || 'Kerala',
        country: document.getElementById('reg-country')?.value || 'India',
        pincode: document.getElementById('reg-pincode')?.value || ''
      };
      if (!profile.name) { alert('Please enter your name.'); return; }
      localStorage.setItem('userProfile', JSON.stringify(profile));
      currentUser = profile; // pseudo user for local flow
      refreshProfileUI();
      document.querySelector('.fixed.inset-0')?.remove();
      showToast('Signed up successfully');
    }

    function signOutUser() {
      auth?.signOut?.();
      const saved = JSON.parse(localStorage.getItem('userProfile') || 'null');
      // Revoke Google session and prevent auto re-login via One Tap
      if (window.google?.accounts?.id) {
        try {
          window.google.accounts.id.disableAutoSelect();
          if (saved?.email) {
            window.google.accounts.id.revoke(saved.email, () => {});
          }
        } catch (e) {}
      }
      currentUser = null;
      localStorage.removeItem('userProfile');
      refreshProfileUI();
    }

    function refreshProfileUI() {
      const data = JSON.parse(localStorage.getItem('userProfile') || 'null');
      const profileBtnImgs = document.querySelectorAll('img[onclick="showProfile()"]');
      profileBtnImgs.forEach(img => {
        if (data?.photoURL) img.src = data.photoURL;
      });
    }

    function showToast(message) {
      let host = document.getElementById('toast-host');
      if (!host) {
        host = document.createElement('div');
        host.id = 'toast-host';
        host.className = 'fixed bottom-5 left-1/2 -translate-x-1/2 z-[100] space-y-2';
        document.body.appendChild(host);
      }
      const toast = document.createElement('div');
      toast.className = 'bg-black bg-opacity-80 text-white text-xs px-3 py-2 rounded-full shadow';
      toast.textContent = message;
      host.appendChild(toast);
      setTimeout(() => { toast.remove(); }, 1800);
    }
  </script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script>
    // Google Identity Services (GSI) setup
    const GOOGLE_CLIENT_ID = '581299639984-afvfigffh341u2mmi24umt9g0gtanknd.apps.googleusercontent.com';

    function parseJwt(token) {
      try {
        const base64Url = token.split('.')[1];
        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        const jsonPayload = decodeURIComponent(escape(window.atob(base64)));
        return JSON.parse(jsonPayload);
      } catch (e) {
        return null;
      }
    }

    function handleGoogleCredentialResponse(response) {
      const payload = parseJwt(response?.credential || '');
      if (!payload) { alert('Google sign-in failed.'); return; }
      const profile = {
        uid: payload.sub,
        name: payload.name || '',
        email: payload.email || '',
        photoURL: payload.picture || ''
      };
      localStorage.setItem('userProfile', JSON.stringify(profile));
      currentUser = profile;
      refreshProfileUI();
      document.querySelector('.fixed.inset-0')?.remove();
      showToast('Signed in with Google');
    }

    function initGoogleSignIn() {
      if (!window.google?.accounts?.id) return;
      window.google.accounts.id.initialize({
        client_id: GOOGLE_CLIENT_ID,
        callback: handleGoogleCredentialResponse
      });
    }

    // Stays data store
    let staysData = [
      // type: Resort/Villa/Hotel; roomSize in sq.ft; capacity persons; amenities comma-list
      { name: 'Vythiri Resort', type: 'Resort', roomSize: 420, capacity: 3, rating: 4.6, reviews: 1243, stars: 5, location: 'Wayanad', landmark: 'Vythiri', distance: '2 km from town', price: 9500, tax: 900, amenities: 'Pool,Spa,Restaurant,Free WiFi,Parking' },
      { name: 'Spice Tree', type: 'Resort', roomSize: 380, capacity: 3, rating: 4.7, reviews: 986, stars: 5, location: 'Munnar', landmark: 'Chithirapuram', distance: '9 km from Munnar', price: 8800, tax: 820, amenities: 'Spa,Restaurant,Free WiFi,Parking' },
      { name: 'Parakkat Nature', type: 'Hotel', roomSize: 340, capacity: 3, rating: 4.5, reviews: 1543, stars: 4, location: 'Munnar', landmark: 'Kallar', distance: '7 km from town', price: 6200, tax: 600, amenities: 'Restaurant,Free WiFi,Parking' },
      { name: 'The Fog Munnar', type: 'Resort', roomSize: 360, capacity: 3, rating: 4.6, reviews: 1120, stars: 4, location: 'Munnar', landmark: 'Pallivasal', distance: '8 km', price: 7700, tax: 740, amenities: 'Pool,Spa,Restaurant,Free WiFi' },
      { name: 'Elephant Court', type: 'Hotel', roomSize: 330, capacity: 3, rating: 4.3, reviews: 987, stars: 4, location: 'Thekkady', landmark: 'Periyar', distance: '1 km from Periyar', price: 5600, tax: 540, amenities: 'Restaurant,Free WiFi,Parking' },
      { name: 'Greenwoods Resort', type: 'Resort', roomSize: 370, capacity: 3, rating: 4.6, reviews: 1211, stars: 4, location: 'Thekkady', landmark: 'Kumily', distance: '2 km', price: 6900, tax: 660, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'Kumarakom Lake Resort', type: 'Resort', roomSize: 480, capacity: 3, rating: 4.7, reviews: 1504, stars: 5, location: 'Kumarakom', landmark: 'Vembanad Lake', distance: 'Lakefront', price: 14500, tax: 1350, amenities: 'Pool,Spa,Restaurant,Free WiFi,Parking' },
      { name: 'Coconut Lagoon', type: 'Resort', roomSize: 450, capacity: 3, rating: 4.6, reviews: 1188, stars: 5, location: 'Kumarakom', landmark: 'Lake', distance: 'Lakefront', price: 12900, tax: 1200, amenities: 'Pool,Spa,Restaurant,Free WiFi' },
      { name: 'Ramada by Wyndham Kochi', type: 'Hotel', roomSize: 320, capacity: 3, rating: 4.4, reviews: 2103, stars: 4, location: 'Kochi', landmark: 'Kumbalam', distance: '10 km from Fort Kochi', price: 5800, tax: 560, amenities: 'Pool,Restaurant,Free WiFi,Parking' },
      { name: 'Brunton Boatyard', type: 'Hotel', roomSize: 350, capacity: 3, rating: 4.6, reviews: 934, stars: 5, location: 'Kochi', landmark: 'Fort Kochi', distance: 'Seafront', price: 11800, tax: 1100, amenities: 'Restaurant,Free WiFi,Parking' },
      { name: 'The Zuri Kumarakom', type: 'Resort', roomSize: 460, capacity: 3, rating: 4.5, reviews: 1402, stars: 5, location: 'Kumarakom', landmark: 'Vembanad', distance: 'Lakefront', price: 11200, tax: 1040, amenities: 'Pool,Spa,Restaurant,Free WiFi,Parking' },
      { name: 'Lake Palace Alleppey', type: 'Villa', roomSize: 400, capacity: 4, rating: 4.4, reviews: 876, stars: 4, location: 'Alleppey', landmark: 'Backwaters', distance: 'Waterfront', price: 9800, tax: 900, amenities: 'Free WiFi,Parking,Restaurant' },
      { name: 'Punnamada Resort', type: 'Resort', roomSize: 390, capacity: 3, rating: 4.5, reviews: 1007, stars: 4, location: 'Alleppey', landmark: 'Punnamada Lake', distance: 'Lakefront', price: 8600, tax: 820, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'Taj Green Cove', type: 'Resort', roomSize: 430, capacity: 3, rating: 4.6, reviews: 1677, stars: 5, location: 'Kovalam', landmark: 'Lighthouse Beach', distance: 'Beachfront', price: 13800, tax: 1300, amenities: 'Pool,Spa,Restaurant,Free WiFi,Parking' },
      { name: 'Uday Samudra', type: 'Hotel', roomSize: 340, capacity: 3, rating: 4.3, reviews: 1320, stars: 4, location: 'Kovalam', landmark: 'Hawa Beach', distance: 'Beach access', price: 6500, tax: 620, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'Aranyakam Homestay', type: 'Villa', roomSize: 300, capacity: 3, rating: 4.7, reviews: 540, stars: 3, location: 'Wayanad', landmark: 'Meppadi', distance: 'Tea estate', price: 4800, tax: 450, amenities: 'Free WiFi,Parking' },
      { name: 'Vythiri Village', type: 'Resort', roomSize: 410, capacity: 3, rating: 4.4, reviews: 1650, stars: 4, location: 'Wayanad', landmark: 'NH766', distance: '3 km', price: 7200, tax: 700, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'Banasura Hill Resort', type: 'Resort', roomSize: 440, capacity: 3, rating: 4.5, reviews: 980, stars: 4, location: 'Wayanad', landmark: 'Banasura Sagar', distance: 'Hill view', price: 9400, tax: 900, amenities: 'Restaurant,Free WiFi,Parking' },
      { name: 'Blue Ginger', type: 'Resort', roomSize: 360, capacity: 3, rating: 4.3, reviews: 720, stars: 4, location: 'Wayanad', landmark: 'Melapoonchola', distance: '4 km', price: 6100, tax: 580, amenities: 'Pool,Free WiFi' },
      { name: 'Poetree Sarovar', type: 'Hotel', roomSize: 350, capacity: 3, rating: 4.5, reviews: 1100, stars: 4, location: 'Thekkady', landmark: 'Ottakathalamedu', distance: 'Valley view', price: 6900, tax: 660, amenities: 'Restaurant,Free WiFi,Parking' },
      // Additional 20 stays across 5 hubs
      { name: 'Tea County Munnar', type: 'Hotel', roomSize: 320, capacity: 3, rating: 4.4, reviews: 980, stars: 4, location: 'Munnar', landmark: 'Court Road', distance: 'Central', price: 5400, tax: 520, amenities: 'Restaurant,Free WiFi,Parking' },
      { name: 'Amber Dale Munnar', type: 'Resort', roomSize: 380, capacity: 3, rating: 4.6, reviews: 760, stars: 4, location: 'Munnar', landmark: 'Pallivasal', distance: '6 km', price: 7900, tax: 760, amenities: 'Spa,Restaurant,Free WiFi' },
      { name: 'Fragrant Nature Munnar', type: 'Hotel', roomSize: 340, capacity: 3, rating: 4.5, reviews: 650, stars: 4, location: 'Munnar', landmark: 'Bison Valley Rd', distance: '5 km', price: 6900, tax: 660, amenities: 'Restaurant,Free WiFi,Parking' },
      { name: 'The Leaf Munnar', type: 'Resort', roomSize: 360, capacity: 3, rating: 4.4, reviews: 810, stars: 4, location: 'Munnar', landmark: 'Chithirapuram', distance: '7 km', price: 7200, tax: 700, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'Moselberg Riverside Cottages', type: 'Villa', roomSize: 420, capacity: 4, rating: 4.5, reviews: 540, stars: 3, location: 'Munnar', landmark: 'Anachal', distance: 'Riverside', price: 5600, tax: 540, amenities: 'Free WiFi,Parking' },
      { name: 'The Raviz Kadavu', type: 'Hotel', roomSize: 330, capacity: 3, rating: 4.3, reviews: 1320, stars: 4, location: 'Kozhikode', landmark: 'Kadavu', distance: 'Riverside', price: 6100, tax: 580, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'Taj Malabar Resort', type: 'Resort', roomSize: 400, capacity: 3, rating: 4.7, reviews: 2100, stars: 5, location: 'Kochi', landmark: 'Willingdon Island', distance: 'Seafront', price: 14500, tax: 1350, amenities: 'Pool,Spa,Restaurant,Free WiFi,Parking' },
      { name: 'Forte Kochi', type: 'Hotel', roomSize: 310, capacity: 2, rating: 4.6, reviews: 740, stars: 4, location: 'Kochi', landmark: 'Princess St', distance: 'Fort Kochi', price: 7800, tax: 740, amenities: 'Restaurant,Free WiFi' },
      { name: 'Eighth Bastion', type: 'Hotel', roomSize: 300, capacity: 2, rating: 4.5, reviews: 620, stars: 4, location: 'Kochi', landmark: 'Fort Kochi', distance: 'Central', price: 7300, tax: 700, amenities: 'Restaurant,Free WiFi,Parking' },
      { name: 'Xandari Pearl', type: 'Resort', roomSize: 430, capacity: 3, rating: 4.4, reviews: 860, stars: 4, location: 'Alleppey', landmark: 'Marari', distance: 'Beachfront', price: 9800, tax: 900, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'Lemon Tree Vembanad', type: 'Hotel', roomSize: 320, capacity: 3, rating: 4.2, reviews: 780, stars: 4, location: 'Alleppey', landmark: 'Muhamma', distance: 'Lakefront', price: 5600, tax: 540, amenities: 'Restaurant,Free WiFi,Parking' },
      { name: 'Lake Canopy', type: 'Resort', roomSize: 380, capacity: 3, rating: 4.4, reviews: 690, stars: 4, location: 'Alleppey', landmark: 'Punnamada', distance: 'Backwaters', price: 8200, tax: 780, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'Turtle On The Beach', type: 'Hotel', roomSize: 330, capacity: 3, rating: 4.3, reviews: 1500, stars: 4, location: 'Kovalam', landmark: 'Hawa Beach', distance: 'Beach access', price: 6400, tax: 620, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'The Leela Kovalam', type: 'Resort', roomSize: 500, capacity: 3, rating: 4.7, reviews: 2200, stars: 5, location: 'Kovalam', landmark: 'Cliff', distance: 'Clifftop', price: 18500, tax: 1700, amenities: 'Pool,Spa,Restaurant,Free WiFi,Parking' },
      { name: 'Bethsaida Hermitage', type: 'Resort', roomSize: 360, capacity: 3, rating: 4.5, reviews: 610, stars: 4, location: 'Kovalam', landmark: 'Chowara', distance: 'Beachfront', price: 8200, tax: 780, amenities: 'Pool,Spa,Restaurant,Free WiFi' },
      { name: 'Wayanad Wild CGH Earth', type: 'Resort', roomSize: 410, capacity: 3, rating: 4.6, reviews: 770, stars: 4, location: 'Wayanad', landmark: 'Lakkidi', distance: 'Forest edge', price: 9900, tax: 940, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'Adithya Nature Resort', type: 'Resort', roomSize: 380, capacity: 3, rating: 4.3, reviews: 540, stars: 4, location: 'Wayanad', landmark: 'Meppadi', distance: 'Hills', price: 6400, tax: 600, amenities: 'Restaurant,Free WiFi,Parking' },
      { name: 'Mount Xanadu', type: 'Resort', roomSize: 420, capacity: 3, rating: 4.7, reviews: 690, stars: 4, location: 'Wayanad', landmark: 'Ambalavayal', distance: 'Valley view', price: 11200, tax: 1040, amenities: 'Pool,Restaurant,Free WiFi' },
      { name: 'Broad Bean Munnar', type: 'Hotel', roomSize: 310, capacity: 2, rating: 4.2, reviews: 480, stars: 3, location: 'Munnar', landmark: 'Chithirapuram', distance: '7 km', price: 4200, tax: 400, amenities: 'Restaurant,Free WiFi,Parking' },
      { name: 'Sterling Thekkady', type: 'Hotel', roomSize: 300, capacity: 2, rating: 4.1, reviews: 720, stars: 3, location: 'Thekkady', landmark: 'Kumily', distance: '2 km', price: 4100, tax: 390, amenities: 'Restaurant,Free WiFi' }
    ];

    function loadStaysFromCSV(event) {
      const file = event.target.files[0];
      if (!file) return;
      Papa.parse(file, {
        header: true,
        skipEmptyLines: true,
        complete: (results) => {
          // Normalize columns expected: Hotel Name, Rating, Reviews, Star Rating, Location, Nearest Landmark, Distance to L, Price
          staysData = results.data.map(r => ({
            name: r['Hotel Name'] || r['name'] || '',
            rating: parseFloat((r['Rating'] || '').toString().replace(/[^\d.]/g, '')) || 0,
            reviews: parseInt((r['Reviews'] || '0').toString().replace(/[^\d]/g, '')) || 0,
            stars: parseInt((r['Star Rating'] || r['Stars'] || '0').toString().replace(/[^\d]/g, '')) || 0,
            location: r['Location'] || '',
            landmark: r['Nearest Landmark'] || r['Landmark'] || '',
            distance: (r['Distance to L'] || r['Distance'] || '').toString(),
            price: parseInt((r['Price'] || '0').toString().replace(/[^\d]/g, '')) || 0,
            tax: parseInt((r['Tax'] || '0').toString().replace(/[^\d]/g, '')) || 0,
          }));
          applyStaySort();
          renderStays();
        }
      });
    }

    function applyStaySort() {
      const sort = document.getElementById('stays-sort');
      if (!sort) return;
      const val = sort.value;
      if (val === 'rating-desc') {
        staysData.sort((a,b) => b.rating - a.rating);
      } else if (val === 'price-asc') {
        staysData.sort((a,b) => a.price - b.price);
      } else if (val === 'reviews-desc') {
        staysData.sort((a,b) => b.reviews - a.reviews);
      }
      renderStays();
    }

    function filterStays() {
      renderStays();
    }

    let selectedHub = '';
    function setLocationFilter(hub) {
      selectedHub = hub || '';
      filterStays();
    }

    function renderStays() {
      const query = (document.getElementById('stays-search')?.value || '').toLowerCase();
      const stars = document.getElementById('stays-stars')?.value || '';
      const area = document.getElementById('stays-area')?.value || '';
      const typeSel = document.getElementById('stays-type')?.value || '';
      const capMin = parseInt(document.getElementById('stays-capacity')?.value || '0') || 0;
      const priceMin = parseInt(document.getElementById('stays-price-min')?.value || '0') || 0;
      const priceMax = parseInt(document.getElementById('stays-price-max')?.value || '0') || 0;
      const selectedAmenityEls = Array.from(document.querySelectorAll('.amenity:checked'));
      const chipAreas = Array.from(document.querySelectorAll('#stays-chips .chip.active')).map(c => c.dataset.area);
      const lists = [
        document.getElementById('stays-resorts'),
        document.getElementById('stays-homestays'),
        document.getElementById('stays-hotels')
      ];
      lists.forEach(list => { if (list) list.innerHTML = ''; });

      const filtered = staysData.filter(s => {
        const matchesQuery = !query ||
          s.name.toLowerCase().includes(query) ||
          s.location.toLowerCase().includes(query) ||
          s.landmark.toLowerCase().includes(query);
        const matchesStars = !stars || s.stars === parseInt(stars);
        const matchesType = !typeSel || (s.type||'').toLowerCase() === typeSel.toLowerCase();
        const matchesCapacity = capMin === 0 || (s.capacity||0) >= capMin;
        const matchesAreaSelect = !area || s.landmark.includes(area) || s.location.includes(area);
        const matchesHub = !selectedHub || s.location.toLowerCase().includes(selectedHub.toLowerCase()) || s.landmark.toLowerCase().includes(selectedHub.toLowerCase());
        const matchesChipAreas = chipAreas.length === 0 || chipAreas.some(a => s.location.includes(a) || s.landmark.includes(a));
        const matchesPriceMin = priceMin === 0 || s.price >= priceMin;
        const matchesPriceMax = priceMax === 0 || s.price <= priceMax;
        const amenities = (s.amenities || '').toString();
        const matchesAmenities = selectedAmenityEls.length === 0 || selectedAmenityEls.every(el => amenities.includes(el.value));
        return matchesQuery && matchesStars && matchesType && matchesCapacity && matchesAreaSelect && matchesHub && matchesChipAreas && matchesPriceMin && matchesPriceMax && matchesAmenities;
      });

      const staysList = document.getElementById('stays-list');
      if (staysList) staysList.innerHTML = '';

      filtered.forEach((s, idx) => {
        const card = document.createElement('div');
        card.className = 'rounded-xl overflow-hidden relative bg-white shadow hover:shadow-lg transition cursor-pointer';
        card.onclick = () => showStayDetails(s.name);
        card.innerHTML = `
          <img src="https://picsum.photos/seed/${encodeURIComponent(s.name)}${idx}/800/480" alt="${s.name}" class="w-full h-[160px] object-cover">
          <div class="p-3">
            <div class="flex justify-between items-start">
              <p class="text-sm font-semibold text-gray-900">${s.name}</p>
              <span class="text-[10px] bg-green-100 text-green-700 rounded px-2">${s.stars}★</span>
            </div>
            <div class="mt-1 flex items-center text-[11px] text-gray-600 gap-2">
              <span>⭐ ${s.rating.toFixed(1)}</span>
              <span>·</span>
              <span>${s.reviews.toLocaleString()} reviews</span>
            </div>
            <div class="mt-1 text-[11px] text-gray-500 truncate">${s.location} · ${s.landmark} · ${s.distance}</div>
            <div class="mt-1 text-[11px] text-gray-600 flex flex-wrap gap-2">
              <span class="px-2 py-0.5 bg-gray-100 rounded-full">${s.type || 'Hotel'}</span>
              <span class="px-2 py-0.5 bg-gray-100 rounded-full">Room: ${s.roomSize || 0} sq.ft</span>
              <span class="px-2 py-0.5 bg-gray-100 rounded-full">Sleeps: ${s.capacity || 2}</span>
            </div>
            <div class="mt-1 text-[11px] text-gray-500 truncate">Amenities: ${(s.amenities||'').toString().split(',').slice(0,4).join(', ')}</div>
            <div class="mt-2 flex justify-between items-center">
              <div class="text-sm font-bold text-gray-900">₹${s.price.toLocaleString()} <span class="text-[10px] font-normal text-gray-500">+ ₹${s.tax.toLocaleString()} tax</span></div>
              <button class="text-xs px-2 py-1 rounded-full border border-gray-200 hover:bg-gray-50" onclick="event.stopPropagation(); bookStay('${s.name}')">Book</button>
            </div>
          </div>`;

        if (staysList) staysList.appendChild(card);
        // Distribute into specific sections by type
        const type = (s.type || '').toLowerCase();
        let bucket = null;
        if (type === 'resort') bucket = document.getElementById('stays-resorts');
        else if (type === 'villa' || type === 'homestay' || type === 'home stay' || type === 'home stays') bucket = document.getElementById('stays-homestays');
        else if (type === 'hotel' || type === '') bucket = document.getElementById('stays-hotels');
        if (bucket) bucket.appendChild(card.cloneNode(true));
      });

      const empty = document.getElementById('stays-empty');
      if (empty) empty.classList.toggle('hidden', filtered.length !== 0);
    }

    function toggleAreaChip(btn, area) {
      btn.classList.toggle('active');
      btn.dataset.area = area;
      filterStays();
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: "Montserrat", sans-serif;
    }
    
    /* Custom scrollbar for webkit browsers */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 3px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #10b981;
      border-radius: 3px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #059669;
    }
    
    /* Smooth transitions */
    * {
      transition: all 0.2s ease-in-out;
    }
    
    /* Touch-friendly button styles */
    .touch-target {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Active state for buttons */
    .btn-active:active {
      transform: scale(0.95);
    }
    
    /* Improved focus states */
    button:focus,
    input:focus {
      outline: 2px solid #10b981;
      outline-offset: 2px;
    }
    
    /* Mobile-first responsive design */
    @media (max-width: 640px) {
      .mobile-stack {
        flex-direction: column;
      }
      
      .mobile-full {
        width: 100%;
        max-width: 100%;
      }
    }
    
    @media (min-width: 641px) and (max-width: 1024px) {
      .tablet-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }
    }
    
    @media (min-width: 1025px) {
      .desktop-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 1.5rem;
      }
    }
    /* Adaptive shell that scales like a phone on desktop, full-width on mobile */
    .phone-shell {
      width: clamp(280px, 28vw, 360px);
      height: clamp(600px, 80vh, 820px);
    }
    @media (max-width: 640px) {
      .phone-shell {
        width: 100%;
        height: auto;
        min-height: 560px;
      }
    }
    /* Kerala chips */
    .chip {
      font-size: 12px;
      border: 1px solid #e5e7eb;
      background: #ffffff;
      border-radius: 9999px;
      padding: 8px 12px;
      margin-right: 8px;
      cursor: pointer;
    }
    .chip:hover { background: #f9fafb; }
    .chip.active {
      background: #ecfdf5;
      color: #047857;
      border-color: #a7f3d0;
    }
  </style>
 </head>
 <body class="bg-[#f0f8f7] p-2 sm:p-4 lg:p-6">
  <main class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 place-items-center gap-4 lg:gap-6 max-w-[1400px] mx-auto">
   <!-- Left phone -->
   <section class="relative phone-shell bg-[#f0f8f7] rounded-3xl shadow-lg flex flex-col overflow-hidden" data-section="home">
    <div class="p-4 flex justify-between items-center">
     <button aria-label="Menu" class="text-gray-700 text-xl touch-target btn-active p-2 rounded-lg hover:bg-gray-100" onclick="toggleMenu(this)">
      <i class="fas fa-bars">
      </i>
     </button>
     <img alt="User profile picture with notification red dot" class="w-10 h-10 rounded-full relative cursor-pointer touch-target" height="40" src="https://storage.googleapis.com/a1aa/image/a74065d2-1ec0-4a5e-b775-f5486818be47.jpg" width="40" onclick="showProfile()"/>
     <span aria-hidden="true" class="absolute top-5 right-5 w-3.5 h-3.5 bg-red-600 rounded-full border-2 border-white cursor-pointer" onclick="showNotifications()">
     </span>
    </div>
    <div class="relative flex-grow">
     <img alt="Kerala backwater houseboats and palm trees reflected in water" class="w-full h-[220px] object-cover rounded-tl-3xl rounded-tr-3xl" height="220" src="https://storage.googleapis.com/a1aa/image/0dba3ca3-346a-480c-e75d-671f486b14f8.jpg" width="320"/>
     <div aria-hidden="true" class="absolute top-0 left-0 w-full h-full pointer-events-none">
      <svg class="w-full h-full rounded-tl-3xl rounded-tr-3xl" fill="white" preserveaspectratio="none" viewbox="0 0 320 220">
       <path d="M0,0 Q100,100 140,140 Q180,180 320,0 L320,220 L0,220 Z" fill="white">
       </path>
      </svg>
     </div>
     <h2 class="absolute top-[110px] left-6 text-white text-2xl font-extrabold tracking-widest drop-shadow-lg">
      Explore Kerala
     </h2>
    </div>
     <div class="px-6 py-4 grid grid-cols-3 gap-y-6 gap-x-8 justify-items-center">
     <div class="flex flex-col items-center space-y-1 cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="handleServiceClick('Trips')">
      <div class="w-16 h-16 rounded-full bg-white flex items-center justify-center shadow-md">
       <img alt="Icon of a green car with luggage on top" class="w-10 h-10" height="40" src="https://storage.googleapis.com/a1aa/image/117c436c-1b2b-4495-295e-974b1c506f30.jpg" width="40"/>
      </div>
      <span class="text-xs text-gray-600">
       Trips
      </span>
     </div>
     <div class="flex flex-col items-center space-y-1 cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="handleServiceClick('Packages')">
      <div class="w-16 h-16 rounded-full bg-white flex items-center justify-center shadow-md">
       <img alt="Icon of blue suitcase and palm tree" class="w-10 h-10" height="40" src="https://storage.googleapis.com/a1aa/image/b990de3f-4377-40d4-bc87-415b4f56f9e5.jpg" width="40"/>
      </div>
      <span class="text-xs text-gray-600">
       Packages
      </span>
     </div>
     <div class="flex flex-col items-center space-y-1 cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="handleServiceClick('Stays')">
      <div class="w-16 h-16 rounded-full bg-white flex items-center justify-center shadow-md">
       <img alt="Icon of a house with palm tree" class="w-10 h-10" height="40" src="https://storage.googleapis.com/a1aa/image/3adf8834-ecb0-48e0-9bfb-8fd7ce2260c4.jpg" width="40"/>
      </div>
      <span class="text-xs text-gray-600">
       Stays
      </span>
     </div>
     <div class="flex flex-col items-center space-y-1 cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="handleServiceClick('Travel Desk')">
      <div class="w-16 h-16 rounded-full bg-white flex items-center justify-center shadow-md">
       <img alt="Icon of a person at a travel desk" class="w-10 h-10" height="40" src="https://storage.googleapis.com/a1aa/image/65445b59-42a4-4740-ea3a-911c2528c512.jpg" width="40"/>
      </div>
      <span class="text-xs text-gray-600">
       Travel Desk
      </span>
     </div>
     <div class="flex flex-col items-center space-y-1 cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="handleServiceClick('Directions')">
      <div class="w-16 h-16 rounded-full bg-white flex items-center justify-center shadow-md">
       <img alt="Icon of a person walking on a map with location pin" class="w-10 h-10" height="40" src="https://storage.googleapis.com/a1aa/image/a647cf8f-a213-46f1-fb8e-350b39ad8029.jpg" width="40"/>
      </div>
      <span class="text-xs text-gray-600">
       Directions
      </span>
     </div>
    </div>
    <div class="px-6 mt-2">
     <div class="flex justify-between items-center mb-2">
      <h3 class="font-bold text-sm tracking-widest text-gray-900">
       Top Destinations
      </h3>
      <a class="text-xs text-green-700 font-semibold hover:underline" href="#">
       View All
      </a>
     </div>
     <div class="grid grid-cols-2 gap-3 mb-4">
      <div class="relative rounded-xl overflow-hidden cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showDestinationDetails('Wayanad')">
       <img alt="Wayanad elephant in forest" class="w-full h-20 object-cover" height="90" src="https://storage.googleapis.com/a1aa/image/f76050c7-38b6-45fc-c989-40b01444123d.jpg" width="140"/>
       <div class="absolute top-2 left-2 bg-black bg-opacity-40 text-white text-xs font-semibold px-2 rounded">
        Wayanad
       </div>
       <div class="absolute top-0 left-0 w-10 h-10 rounded-full bg-white bg-opacity-40" style="clip-path: ellipse(40% 100% at 50% 50%)">
       </div>
      </div>
      <div class="relative rounded-xl overflow-hidden cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showDestinationDetails('Kozhikode')">
       <img alt="Kozhikode sunset hill" class="w-full h-20 object-cover rounded-xl" height="90" src="https://storage.googleapis.com/a1aa/image/dd0cd2bf-14a9-4f08-fb91-b5319f84314b.jpg" width="140"/>
       <div class="absolute top-2 left-2 bg-black bg-opacity-40 text-white text-xs font-semibold px-2 rounded">
        Kozhikode
       </div>
      </div>
     </div>
    </div>
    <div class="px-6 mt-2">
     <div class="flex justify-between items-center mb-2">
      <h3 class="font-bold text-sm tracking-widest text-gray-900">Hotels</h3>
      <a class="text-xs text-green-700 font-semibold hover:underline" href="#" onclick="navigateToSection('stays')">View All</a>
     </div>
     <div id="home-hotels" class="flex space-x-3 overflow-x-auto pb-2"></div>
    </div>
    <div class="px-6 mt-2">
     <div class="flex justify-between items-center mb-2">
      <h3 class="font-bold text-sm tracking-widest text-gray-900">
       Festivals/Events
      </h3>
      <a class="text-xs text-green-700 font-semibold hover:underline" href="#">
       View All
      </a>
     </div>
     <div class="grid grid-cols-2 gap-3">
      <div class="relative rounded-xl overflow-hidden cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showDestinationDetails('Vallamkali')">
       <img alt="Vallamkali boat race festival" class="w-full h-20 object-cover rounded-xl" height="90" src="https://storage.googleapis.com/a1aa/image/396d76a5-f025-4006-eb1e-393ee1bbc027.jpg" width="140"/>
       <div class="absolute top-2 left-2 bg-black bg-opacity-40 text-white text-xs font-semibold px-2 rounded">
        Vallamkali
       </div>
      </div>
      <div class="relative rounded-xl overflow-hidden cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showDestinationDetails('Kadhakali')">
       <img alt="Kadhakali dance festival" class="w-full h-20 object-cover rounded-xl" height="90" src="https://storage.googleapis.com/a1aa/image/da999b81-12bf-48f7-0628-115ff269cefa.jpg" width="140"/>
       <div class="absolute top-2 left-2 bg-black bg-opacity-40 text-white text-xs font-semibold px-2 rounded">
        Kadhakali
       </div>
      </div>
     </div>
    </div>
    <div class="px-6 pb-6">
     <h3 class="font-bold text-sm tracking-widest text-gray-900 mb-2">Top Places in Kerala</h3>
     <div class="space-y-3 text-xs text-gray-700 leading-snug">
      <div class="bg-white rounded-xl p-3 shadow border border-gray-100">
       <p class="font-semibold text-gray-900">Munnar</p>
       <p>Hill station famed for rolling tea gardens, misty valleys, Eravikulam National Park and viewpoints like Top Station.</p>
      </div>
      <div class="bg-white rounded-xl p-3 shadow border border-gray-100">
       <p class="font-semibold text-gray-900">Alappuzha (Alleppey)</p>
       <p>Backwater paradise known for serene houseboat cruises, narrow canals, paddy fields and the picturesque Vembanad Lake.</p>
      </div>
      <div class="bg-white rounded-xl p-3 shadow border border-gray-100">
       <p class="font-semibold text-gray-900">Kochi (Fort Kochi)</p>
       <p>Historic port city with colonial streets, Chinese fishing nets, synagogues, spice markets and vibrant art cafés.</p>
      </div>
      <div class="bg-white rounded-xl p-3 shadow border border-gray-100">
       <p class="font-semibold text-gray-900">Wayanad</p>
       <p>Forest-clad highlands offering wildlife sanctuaries, waterfalls, caves at Edakkal, and scenic treks amid coffee estates.</p>
      </div>
      <div class="bg-white rounded-xl p-3 shadow border border-gray-100">
       <p class="font-semibold text-gray-900">Kumarakom</p>
       <p>Birdwatcher's haven on Vembanad Lake with tranquil backwaters, luxury resorts and the Kumarakom Bird Sanctuary.</p>
      </div>
      <div class="bg-white rounded-xl p-3 shadow border border-gray-100">
       <p class="font-semibold text-gray-900">Thekkady (Periyar)</p>
       <p>Wildlife hotspot known for Periyar Tiger Reserve, boat safaris, spice plantations and bamboo rafting experiences.</p>
      </div>
      <div class="bg-white rounded-xl p-3 shadow border border-gray-100">
       <p class="font-semibold text-gray-900">Varkala</p>
       <p>Cliff-fringed beaches with golden sands, cafes on the cliff edge, mineral springs and spectacular Arabian Sea sunsets.</p>
      </div>
      <div class="bg-white rounded-xl p-3 shadow border border-gray-100">
       <p class="font-semibold text-gray-900">Kovalam</p>
       <p>Famous for lighthouse-topped headland, crescent beaches, calm waters for swimming and Ayurvedic wellness retreats.</p>
      </div>
      <div class="bg-white rounded-xl p-3 shadow border border-gray-100">
       <p class="font-semibold text-gray-900">Athirappilly Waterfalls</p>
       <p>Kerala's "Niagara" cascading through lush rainforest; great for nature walks, photography and monsoon grandeur.</p>
      </div>
      <div class="bg-white rounded-xl p-3 shadow border border-gray-100">
       <p class="font-semibold text-gray-900">Bekal Fort</p>
       <p>Massive seaside fort in Kasaragod with laterite ramparts, sea views and a quiet beach perfect for sunset strolls.</p>
      </div>
     </div>
    </div>
    <nav class="absolute bottom-0 left-0 w-full bg-white rounded-b-3xl flex justify-around items-center py-3 text-green-700 text-sm font-semibold tracking-wide">
     <button aria-label="Home" class="flex flex-col items-center gap-1 touch-target btn-active" onclick="navigateToSection('home')">
      <i class="fas fa-home text-lg">
      </i>
      Home
     </button>
     <button aria-label="Destinations" class="flex flex-col items-center gap-1 text-gray-400 touch-target btn-active" onclick="navigateToSection('destinations')">
      <i class="fas fa-map-marker-alt text-lg">
      </i>
      Destinations
     </button>
     <button aria-label="Directions" class="flex flex-col items-center gap-1 text-gray-400 touch-target btn-active" onclick="navigateToSection('directions')">
      <i class="fas fa-location-arrow text-lg">
      </i>
      Directions
     </button>
     <button aria-label="Stays" class="flex flex-col items-center gap-1 text-gray-400 touch-target btn-active" onclick="navigateToSection('stays')">
      <i class="fas fa-bed text-lg">
      </i>
      Stays
     </button>
    </nav>
   </section>
   <!-- Middle phone -->
   <section class="relative phone-shell bg-white rounded-3xl shadow-lg flex flex-col overflow-hidden" data-section="destinations">
    <div class="p-4 flex justify-between items-center">
     <button aria-label="Menu" class="text-gray-700 text-xl touch-target btn-active p-2 rounded-lg hover:bg-gray-100" onclick="toggleMenu(this)">
      <i class="fas fa-bars">
      </i>
     </button>
     <img alt="User profile picture with notification red dot" class="w-10 h-10 rounded-full relative cursor-pointer touch-target" height="40" src="https://storage.googleapis.com/a1aa/image/a74065d2-1ec0-4a5e-b775-f5486818be47.jpg" width="40" onclick="showProfile()"/>
     <span aria-hidden="true" class="absolute top-5 right-5 w-3.5 h-3.5 bg-red-600 rounded-full border-2 border-white cursor-pointer" onclick="showNotifications()">
     </span>
    </div>
    <div class="relative h-[220px]">
     <img alt="Elephant in Wayanad forest" class="w-full h-full object-cover rounded-tl-3xl rounded-tr-3xl" height="220" src="https://storage.googleapis.com/a1aa/image/eb95a9e6-e9a5-4f50-8bbc-25eef0afb6b3.jpg" width="320"/>
     <button aria-label="Location arrow" class="absolute top-4 right-4 bg-white rounded-full p-2 shadow-md text-green-700 touch-target btn-active" onclick="getCurrentLocation()">
      <i class="fas fa-location-arrow">
      </i>
     </button>
    </div>
    <div id="destinations-scroll" class="p-6 flex flex-col flex-grow overflow-y-auto" style="scroll-behavior: smooth; padding-bottom: 6rem;">
     <h2 class="text-lg font-bold mb-2">
      Wayanad
     </h2>
     <p class="text-xs text-gray-600 mb-4 leading-tight font-mono">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip.
     </p>
     <div class="flex space-x-2 mb-4">
      <img alt="Waterfall in Wayanad" class="rounded-lg object-cover w-16 h-10" height="40" src="https://storage.googleapis.com/a1aa/image/4cbcd9d2-7bba-4019-8eab-e8427443f436.jpg" width="60"/>
      <img alt="Tiger in Wayanad forest" class="rounded-lg object-cover w-16 h-10" height="40" src="https://storage.googleapis.com/a1aa/image/a4d18961-0fc6-4c92-b6aa-736d675ca07d.jpg" width="60"/>
      <img alt="Elephants in Wayanad forest" class="rounded-lg object-cover w-16 h-10" height="40" src="https://storage.googleapis.com/a1aa/image/650bb2a0-c5bd-417b-298e-6498809183cd.jpg" width="60"/>
      <img alt="Lake in Wayanad" class="rounded-lg object-cover w-16 h-10" height="40" src="https://storage.googleapis.com/a1aa/image/4121c854-48c8-4fe2-37ff-5026ea97627a.jpg" width="60"/>
     </div>
     <div class="flex items-center space-x-6 text-gray-600 text-xs mb-4">
      <div class="flex items-center space-x-1 cursor-pointer touch-target btn-active hover:text-blue-500 transition-colors" onclick="toggleLike(this.querySelector('i'))">
       <i class="far fa-thumbs-up">
       </i>
       <span>
        837635
       </span>
      </div>
      <div class="flex items-center space-x-1 cursor-pointer touch-target btn-active hover:text-red-500 transition-colors" onclick="toggleLike(this.querySelector('i'))">
       <i class="far fa-heart">
       </i>
       <span>
        165645
       </span>
      </div>
      <div class="flex items-center space-x-1 cursor-pointer touch-target btn-active hover:text-green-500 transition-colors" onclick="showComments(this.querySelector('i'))">
       <i class="far fa-comment">
       </i>
       <span>
        67363
       </span>
      </div>
     </div>
     <div class="flex -space-x-3 mb-6">
      <img alt="User 1 profile picture" class="w-10 h-10 rounded-full border-2 border-white cursor-pointer touch-target hover:scale-110 transition-transform" height="40" src="https://storage.googleapis.com/a1aa/image/751e2870-c5c0-40f4-8245-611694a467ba.jpg" width="40" onclick="showUserProfile('Sarah M.')"/>
      <img alt="User 2 profile picture" class="w-10 h-10 rounded-full border-2 border-white cursor-pointer touch-target hover:scale-110 transition-transform" height="40" src="https://storage.googleapis.com/a1aa/image/cffa5a9f-303d-4bf4-0d8c-f391cd3de20f.jpg" width="40" onclick="showUserProfile('John D.')"/>
      <img alt="User 3 profile picture" class="w-10 h-10 rounded-full border-2 border-white cursor-pointer touch-target hover:scale-110 transition-transform" height="40" src="https://storage.googleapis.com/a1aa/image/61407ff1-81a1-40d2-bdd1-c25cb1c3b20a.jpg" width="40" onclick="showUserProfile('Mike R.')"/>
      <img alt="User 4 profile picture" class="w-10 h-10 rounded-full border-2 border-white cursor-pointer touch-target hover:scale-110 transition-transform" height="40" src="https://storage.googleapis.com/a1aa/image/1479c295-2c18-4122-13be-b2a1057c6a4e.jpg" width="40" onclick="showUserProfile('Lisa K.')"/>
      <button aria-label="More options" class="ml-auto bg-gray-200 rounded-full w-10 h-10 flex items-center justify-center text-gray-600 touch-target btn-active" onclick="showMoreOptions()">
       <i class="fas fa-ellipsis-h">
       </i>
      </button>
     </div>
     <div class="bg-white rounded-xl shadow-md p-4 flex justify-between items-center text-xs text-green-700 font-semibold tracking-wide mb-6">
      <div class="flex flex-col items-center">
       <i class="fas fa-map-marker-alt text-lg mb-1">
       </i>
       <span>
        From
       </span>
       <span class="text-black font-bold">
        Bangalore
       </span>
      </div>
      <div class="text-center border-x border-green-300 px-4">
       <span class="block text-xs font-normal text-gray-500 mb-1">
        5h 58m
       </span>
       <span class="block text-sm font-bold">
        277.4 Km
       </span>
       <span class="block text-xs font-normal text-gray-500">
        Via Mysore Road &amp; NH766
       </span>
      </div>
      <div class="flex flex-col items-center">
       <i class="fas fa-map-marker-alt text-lg mb-1">
       </i>
       <span>
        To
       </span>
       <span class="text-black font-bold">
        Wayanad
       </span>
      </div>
     </div>
     <button class="bg-green-700 text-white rounded-full py-3 text-center font-semibold tracking-wide hover:bg-green-800 transition touch-target btn-active" onclick="showBookingModal()">
      Book a Trip
     </button>
    </div>
    <button aria-label="Scroll up" class="absolute right-3 top-24 z-20 bg-white/90 hover:bg-white shadow p-2 rounded-full text-gray-700" onclick="scrollDestinations(-240)"><i class="fas fa-chevron-up"></i></button>
    <button aria-label="Scroll down" class="absolute right-3 bottom-24 z-20 bg-white/90 hover:bg-white shadow p-2 rounded-full text-gray-700" onclick="scrollDestinations(240)"><i class="fas fa-chevron-down"></i></button>
    <button aria-label="Previous place" class="absolute left-3 top-1/2 -translate-y-1/2 z-20 bg-white/90 hover:bg-white shadow p-3 rounded-full text-gray-700" onclick="prevDestination()"><i class="fas fa-chevron-left"></i></button>
    <button aria-label="Next place" class="absolute right-3 top-1/2 -translate-y-1/2 z-20 bg-white/90 hover:bg-white shadow p-3 rounded-full text-gray-700" onclick="nextDestination()"><i class="fas fa-chevron-right"></i></button>
    <nav class="absolute bottom-0 left-0 w-full bg-white rounded-b-3xl flex justify-around items-center py-3 text-green-700 text-sm font-semibold tracking-wide">
     <button aria-label="Home" class="flex flex-col items-center gap-1 text-gray-400">
      <i class="fas fa-home text-lg">
      </i>
      Home
     </button>
     <button aria-label="Destinations" class="flex flex-col items-center gap-1">
      <i class="fas fa-map-marker-alt text-lg">
      </i>
      Destinstions
     </button>
     <button aria-label="Directions" class="flex flex-col items-center gap-1 text-gray-400">
      <i class="fas fa-location-arrow text-lg">
      </i>
      Directions
     </button>
     <button aria-label="Stays" class="flex flex-col items-center gap-1 text-gray-400">
      <i class="fas fa-bed text-lg">
      </i>
      Stays
     </button>
    </nav>
   </section>
   <!-- Right phone -->
   <section class="relative phone-shell bg-[#f9f9f9] rounded-3xl shadow-lg flex flex-col overflow-hidden" data-section="stays">
    <div class="p-4 flex justify-between items-center">
     <button aria-label="Menu" class="text-gray-700 text-xl touch-target btn-active p-2 rounded-lg hover:bg-gray-100" onclick="toggleMenu(this)">
      <i class="fas fa-bars">
      </i>
     </button>
     <img alt="User profile picture with notification red dot" class="w-10 h-10 rounded-full relative cursor-pointer touch-target" height="40" src="https://storage.googleapis.com/a1aa/image/a74065d2-1ec0-4a5e-b775-f5486818be47.jpg" width="40" onclick="showProfile()"/>
     <span aria-hidden="true" class="absolute top-5 right-5 w-3.5 h-3.5 bg-red-600 rounded-full border-2 border-white cursor-pointer" onclick="showNotifications()">
     </span>
    </div>
    <div class="px-6 pb-6 flex flex-col flex-grow overflow-y-auto">
     <div class="mb-4 flex items-center gap-2">
      <input id="stays-search" class="flex-1 bg-white rounded-full py-2 px-4 text-xs text-gray-600 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-700 focus:placeholder-gray-300" placeholder="Search hotels, landmarks..." type="search" oninput="filterStays()"/>
      <label class="cursor-pointer text-xs bg-white border border-gray-200 rounded-full py-2 px-3 hover:bg-gray-50">
       <input id="stays-file" type="file" accept=".csv" class="hidden" onchange="loadStaysFromCSV(event)"/>
       Import CSV
      </label>
     </div>
     <div class="mb-4 grid grid-cols-3 gap-2 text-xs">
      <select id="stays-sort" class="bg-white border border-gray-200 rounded-lg py-2 px-3" onchange="applyStaySort()">
       <option value="rating-desc">Sort: Rating (high)</option>
       <option value="price-asc">Sort: Price (low)</option>
       <option value="reviews-desc">Sort: Reviews (high)</option>
      </select>
      <select id="stays-stars" class="bg-white border border-gray-200 rounded-lg py-2 px-3" onchange="filterStays()">
       <option value="">Stars: Any</option>
       <option value="5">5 Star</option>
       <option value="4">4 Star</option>
       <option value="3">3 Star</option>
      </select>
      <select id="stays-area" class="bg-white border border-gray-200 rounded-lg py-2 px-3" onchange="filterStays()">
       <option value="">Area: Any</option>
       <option value="city centre">City Centre</option>
       <option value="Attukal Waterfalls">Attukal Waterfalls</option>
      </select>
     </div>
     <div class="mb-4 grid grid-cols-2 gap-2 text-xs">
      <select id="stays-type" class="bg-white border border-gray-200 rounded-lg py-2 px-3" onchange="filterStays()">
       <option value="">Type: Any</option>
       <option>Resort</option>
       <option>Villa</option>
       <option>Hotel</option>
      </select>
      <input id="stays-capacity" type="number" min="0" class="bg-white border border-gray-200 rounded-lg py-2 px-3" placeholder="Min capacity" oninput="filterStays()"/>
     </div>
     <div class="mb-4 flex items-center gap-3 text-xs">
      <div class="flex items-center gap-2">
       <label class="text-gray-600">₹ Min</label>
       <input id="stays-price-min" type="number" class="w-20 bg-white border border-gray-200 rounded-lg py-2 px-2" placeholder="0" oninput="filterStays()"/>
      </div>
      <div class="flex items-center gap-2">
       <label class="text-gray-600">₹ Max</label>
       <input id="stays-price-max" type="number" class="w-24 bg-white border border-gray-200 rounded-lg py-2 px-2" placeholder="99999" oninput="filterStays()"/>
      </div>
      <details class="ml-auto">
       <summary class="cursor-pointer text-gray-700">Amenities</summary>
       <div class="mt-2 grid grid-cols-2 gap-2 bg-white border border-gray-200 rounded-lg p-3 w-[220px]">
        <label class="flex items-center gap-2 text-xs"><input type="checkbox" value="Free WiFi" onchange="filterStays()" class="amenity">Free WiFi</label>
        <label class="flex items-center gap-2 text-xs"><input type="checkbox" value="Breakfast" onchange="filterStays()" class="amenity">Breakfast</label>
        <label class="flex items-center gap-2 text-xs"><input type="checkbox" value="Pool" onchange="filterStays()" class="amenity">Pool</label>
        <label class="flex items-center gap-2 text-xs"><input type="checkbox" value="Parking" onchange="filterStays()" class="amenity">Parking</label>
        <label class="flex items-center gap-2 text-xs"><input type="checkbox" value="AC" onchange="filterStays()" class="amenity">AC</label>
        <label class="flex items-center gap-2 text-xs"><input type="checkbox" value="Restaurant" onchange="filterStays()" class="amenity">Restaurant</label>
       </div>
      </details>
     </div>
     <div id="stays-chips" class="mb-4 overflow-x-auto whitespace-nowrap pb-1">
      <button class="chip" onclick="toggleAreaChip(this, 'Munnar')">Munnar</button>
      <button class="chip" onclick="toggleAreaChip(this, 'Wayanad')">Wayanad</button>
      <button class="chip" onclick="toggleAreaChip(this, 'Kochi')">Kochi</button>
      <button class="chip" onclick="toggleAreaChip(this, 'Alappuzha')">Alappuzha</button>
      <button class="chip" onclick="toggleAreaChip(this, 'Kovalam')">Kovalam</button>
      <button class="chip" onclick="toggleAreaChip(this, 'Kumarakom')">Kumarakom</button>
      <button class="chip" onclick="toggleAreaChip(this, 'Varkala')">Varkala</button>
     </div>
     <div class="mb-4">
      <div class="text-xs text-gray-600 mb-1">Locations</div>
      <div class="flex flex-wrap gap-2 text-xs">
       <button class="px-3 py-1 border border-gray-200 rounded-full" onclick="setLocationFilter('Munnar')">Munnar</button>
       <button class="px-3 py-1 border border-gray-200 rounded-full" onclick="setLocationFilter('Wayanad')">Wayanad</button>
       <button class="px-3 py-1 border border-gray-200 rounded-full" onclick="setLocationFilter('Kochi')">Kochi</button>
       <button class="px-3 py-1 border border-gray-200 rounded-full" onclick="setLocationFilter('Alleppey')">Alleppey</button>
       <button class="px-3 py-1 border border-gray-200 rounded-full" onclick="setLocationFilter('Kovalam')">Kovalam</button>
       <button class="px-3 py-1 border border-gray-200 rounded-full" onclick="setLocationFilter('')">Clear</button>
      </div>
     </div>
     <div id="stays-dynamic" class="mb-6">
      <div id="stays-list" class="grid grid-cols-1 gap-3"></div>
      <div id="stays-empty" class="hidden text-center text-xs text-gray-500 py-6">Import your Kerala hotels CSV to see listings here.</div>
     </div>
     <h2 class="text-gray-500 text-sm mb-4 leading-snug">
      Find your Stay
      <br/>
      In
      <span class="font-bold text-green-700">
       Wayanad
      </span>
     </h2>
     <!-- Resorts -->
     <div class="mb-6">
      <div class="flex justify-between items-center mb-2">
       <h3 class="font-semibold text-sm text-gray-900">
        Resorts
       </h3>
       <a class="text-xs text-green-700 font-semibold hover:underline" href="#">
        View All
       </a>
      </div>
      <div id="stays-resorts" class="flex space-x-3 overflow-x-auto pb-2">
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Vythiri Resorts')">
        <img alt="Vythiri Resorts night view with lights" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/653235bc-8b62-4158-f9cd-87fc55569d81.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Vythiri Resorts
        </p>
       </div>
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Blue Ginger')">
        <img alt="Blue Ginger resort pool view" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/4c101e58-ca88-490a-f567-16247b7bcaa4.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Blue Ginger
        </p>
       </div>
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Banasura Resorts')">
        <img alt="Banasura Resorts lake view" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/832b2a9f-7f29-4640-57fd-12125cb82d01.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Banasura Resorts
        </p>
       </div>
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Vythiri Resorts')">
        <img alt="Vythiri Resorts night view with lights" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/653235bc-8b62-4158-f9cd-87fc55569d81.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Vythiri Resorts
        </p>
       </div>
      </div>
     </div>
     <!-- Home Stays -->
     <div class="mb-6">
      <div class="flex justify-between items-center mb-2">
       <h3 class="font-semibold text-sm text-gray-900">
        Home Stays
       </h3>
       <a class="text-xs text-green-700 font-semibold hover:underline" href="#">
        View All
       </a>
      </div>
      <div id="stays-homestays" class="flex space-x-3 overflow-x-auto pb-2">
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Vythiri Resorts')">
        <img alt="Vythiri Resorts night view with lights" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/653235bc-8b62-4158-f9cd-87fc55569d81.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Vythiri Resorts
        </p>
       </div>
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Blue Ginger')">
        <img alt="Blue Ginger resort pool view" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/4c101e58-ca88-490a-f567-16247b7bcaa4.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Blue Ginger
        </p>
       </div>
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Banasura Resorts')">
        <img alt="Banasura Resorts lake view" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/832b2a9f-7f29-4640-57fd-12125cb82d01.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Banasura Resorts
        </p>
       </div>
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Vythiri Resorts')">
        <img alt="Vythiri Resorts night view with lights" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/653235bc-8b62-4158-f9cd-87fc55569d81.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Vythiri Resorts
        </p>
       </div>
      </div>
     </div>
     <!-- Hotels -->
     <div class="mb-6">
      <div class="flex justify-between items-center mb-2">
       <h3 class="font-semibold text-sm text-gray-900">
        Hotels
       </h3>
       <a class="text-xs text-green-700 font-semibold hover:underline" href="#">
        View All
       </a>
      </div>
      <div id="stays-hotels" class="flex space-x-3 overflow-x-auto pb-2">
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Vythiri Resorts')">
        <img alt="Vythiri Resorts night view with lights" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/653235bc-8b62-4158-f9cd-87fc55569d81.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Vythiri Resorts
        </p>
       </div>
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Blue Ginger')">
        <img alt="Blue Ginger resort pool view" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/4c101e58-ca88-490a-f567-16247b7bcaa4.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Blue Ginger
        </p>
       </div>
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Banasura Resorts')">
        <img alt="Banasura Resorts lake view" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/832b2a9f-7f29-4640-57fd-12125cb82d01.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Banasura Resorts
        </p>
       </div>
       <div class="min-w-[100px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform" onclick="showStayDetails('Vythiri Resorts')">
        <img alt="Vythiri Resorts night view with lights" class="w-full h-[140px] object-cover rounded-xl" height="140" src="https://storage.googleapis.com/a1aa/image/653235bc-8b62-4158-f9cd-87fc55569d81.jpg" width="100"/>
        <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs rounded px-1 flex justify-between w-[90%]">
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); toggleLike(this.querySelector('i'))">
          <i class="far fa-heart">
          </i>
          <span>
           1656
          </span>
         </div>
         <div class="flex items-center space-x-1" onclick="event.stopPropagation(); showComments(this.querySelector('i'))">
          <i class="far fa-comment">
          </i>
          <span>
           656
          </span>
         </div>
        </div>
        <p class="text-xs mt-1 text-gray-700">
         Vythiri Resorts
        </p>
       </div>
      </div>
     </div>
    </div>
    <nav class="absolute bottom-0 left-0 w-full bg-white rounded-b-3xl flex justify-around items-center py-3 text-green-700 text-sm font-semibold tracking-wide">
     <button aria-label="Home" class="flex flex-col items-center gap-1">
      <i class="fas fa-home text-lg">
      </i>
      Home
     </button>
     <button aria-label="Destinations" class="flex flex-col items-center gap-1 text-gray-400">
      <i class="fas fa-map-marker-alt text-lg">
      </i>
      Destinations
     </button>
     <button aria-label="Directions" class="flex flex-col items-center gap-1 text-gray-400">
      <i class="fas fa-location-arrow text-lg">
      </i>
      Directions
     </button>
     <button aria-label="Stays" class="flex flex-col items-center gap-1 text-green-700">
      <i class="fas fa-bed text-lg">
      </i>
      Stay
     </button>
    </nav>
   </section>
   <!-- Directions section -->
   <section class="relative phone-shell bg-white rounded-3xl shadow-lg flex flex-col overflow-hidden" data-section="directions">
    <div class="p-4 flex justify-between items-center">
     <h2 class="text-lg font-bold">Directions</h2>
    </div>
    <div class="p-6 space-y-4 flex-1 flex flex-col">
     <div class="grid grid-cols-1 gap-3">
      <input id="dir-from" class="w-full bg-white rounded-lg py-2 px-3 border border-gray-200 text-sm" placeholder="From (city or coordinates)"/>
      <input id="dir-to" class="w-full bg-white rounded-lg py-2 px-3 border border-gray-200 text-sm" placeholder="To (city or coordinates)"/>
      <select id="dir-mode" class="w-full bg-white rounded-lg py-2 px-3 border border-gray-200 text-sm">
       <option value="driving">Driving</option>
       <option value="walking">Walking</option>
       <option value="bicycling">Cycling</option>
      </select>
      <button class="bg-green-700 text-white rounded-full py-2 font-semibold" onclick="calculateRoute()">Get Route</button>
     </div>
     <div id="dir-map" class="flex-1 rounded-xl bg-gray-100 border border-gray-200 flex items-center justify-center text-gray-500 text-sm">
      Map placeholder
     </div>
    </div>
    <nav class="absolute bottom-0 left-0 w-full bg-white rounded-b-3xl flex justify-around items-center py-3 text-green-700 text-sm font-semibold tracking-wide">
     <button aria-label="Home" class="flex flex-col items-center gap-1" onclick="navigateToSection('home')">
      <i class="fas fa-home text-lg"></i>
      Home
     </button>
     <button aria-label="Destinations" class="flex flex-col items-center gap-1 text-gray-400" onclick="navigateToSection('destinations')">
      <i class="fas fa-map-marker-alt text-lg"></i>
      Destinations
     </button>
     <button aria-label="Directions" class="flex flex-col items-center gap-1 text-green-700" onclick="navigateToSection('directions')">
      <i class="fas fa-location-arrow text-lg"></i>
      Directions
     </button>
     <button aria-label="Stays" class="flex flex-col items-center gap-1 text-gray-400" onclick="navigateToSection('stays')">
      <i class="fas fa-bed text-lg"></i>
      Stays
     </button>
    </nav>
   </section>
  </main>
  <!-- Packages section (overlay style for consistency with grid layout) -->
  <section class="relative phone-shell bg-white rounded-3xl shadow-lg flex flex-col overflow-hidden" data-section="packages">
   <div class="p-4 flex justify-between items-center">
    <button aria-label="Menu" class="text-gray-700 text-xl touch-target btn-active p-2 rounded-lg hover:bg-gray-100" onclick="toggleMenu(this)">
     <i class="fas fa-bars"></i>
    </button>
    <h2 class="text-lg font-bold">Packages</h2>
    <span></span>
   </div>
   <div id="packages-scroll" class="px-6 pb-6 flex-1 overflow-y-auto" style="scroll-behavior:smooth; padding-bottom: 5rem;"></div>
   <nav class="absolute bottom-0 left-0 w-full bg-white rounded-b-3xl flex justify-around items-center py-3 text-green-700 text-sm font-semibold tracking-wide">
    <button aria-label="Home" class="flex flex-col items-center gap-1 text-gray-400" onclick="navigateToSection('home')">
     <i class="fas fa-home text-lg"></i>
     Home
    </button>
    <button aria-label="Destinations" class="flex flex-col items-center gap-1 text-gray-400" onclick="navigateToSection('destinations')">
     <i class="fas fa-map-marker-alt text-lg"></i>
     Destinations
    </button>
    <button aria-label="Packages" class="flex flex-col items-center gap-1 text-green-700" onclick="navigateToSection('packages')">
     <i class="fas fa-suitcase-rolling text-lg"></i>
     Packages
    </button>
    <button aria-label="Stays" class="flex flex-col items-center gap-1 text-gray-400" onclick="navigateToSection('stays')">
     <i class="fas fa-bed text-lg"></i>
     Stays
    </button>
   </nav>
  </section>

  <!-- JavaScript for interactive functionality -->
  <script>
    // Global state management
    let currentSection = 'home';
    let likes = {};
    let comments = {};
    let hearts = {};

    // Initialize the app
    document.addEventListener('DOMContentLoaded', function() {
      initializeApp();
      setupEventListeners();
      loadUserPreferences();
      initGoogleSignIn();
      renderDestinationSlideshow();
      renderHomeHotels();
    });

    function initializeApp() {
      // Add touch-friendly classes to all buttons
      const buttons = document.querySelectorAll('button');
      buttons.forEach(button => {
        button.classList.add('touch-target', 'btn-active');
      });

      // Add hover effects to interactive elements
      const interactiveElements = document.querySelectorAll('img[onclick], .cursor-pointer');
      interactiveElements.forEach(element => {
        element.classList.add('hover:opacity-80', 'transition-opacity');
      });
    }

    function setupEventListeners() {
      // Search functionality
      const searchInput = document.getElementById('stays-search') || document.querySelector('input[type="search"]');
      if (searchInput) {
        searchInput.addEventListener('input', handleSearch);
        searchInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            performSearch(this.value);
          }
        });
      }

      // Navigation buttons
      const navButtons = document.querySelectorAll('nav button');
      navButtons.forEach(button => {
        button.addEventListener('click', function() {
          const section = this.getAttribute('aria-label').toLowerCase();
          navigateToSection(section);
        });
      });

      // Service buttons (Trips, Packages, etc.)
      const serviceButtons = document.querySelectorAll('.grid .flex.flex-col.items-center');
      serviceButtons.forEach(button => {
        button.addEventListener('click', function() {
          const service = this.querySelector('span').textContent.trim();
          handleServiceClick(service);
        });
      });

      // Destination cards
      const destinationCards = document.querySelectorAll('.relative.rounded-xl.overflow-hidden');
      destinationCards.forEach(card => {
        card.addEventListener('click', function() {
          const destination = this.querySelector('.absolute.top-2.left-2').textContent.trim();
          showDestinationDetails(destination);
        });
      });

      // Resort/Hotel cards
      const stayCards = document.querySelectorAll('.min-w-\\[100px\\].rounded-xl.overflow-hidden.relative');
      stayCards.forEach(card => {
        card.addEventListener('click', function() {
          const stayName = this.querySelector('p').textContent.trim();
          showStayDetails(stayName);
        });
      });

      // Like/Heart buttons
      const likeButtons = document.querySelectorAll('.far.fa-thumbs-up, .far.fa-heart');
      likeButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.stopPropagation();
          toggleLike(this);
        });
      });

      // Comment buttons
      const commentButtons = document.querySelectorAll('.far.fa-comment');
      commentButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.stopPropagation();
          showComments(this);
        });
      });

      // Book Trip button
      const bookTripButton = document.querySelector('button:contains("Book a Trip")');
      if (bookTripButton) {
        bookTripButton.addEventListener('click', function() {
          showBookingModal();
        });
      }

      // Location arrow button
      const locationButton = document.querySelector('button[aria-label="Location arrow"]');
      if (locationButton) {
        locationButton.addEventListener('click', function() {
          getCurrentLocation();
        });
      }

      // More options button
      const moreOptionsButton = document.querySelector('button[aria-label="More options"]');
      if (moreOptionsButton) {
        moreOptionsButton.addEventListener('click', function() {
          showMoreOptions();
        });
      }
    }

    // Navigation functions
    function navigateToSection(section) {
      // Update active navigation state
      const navButtons = document.querySelectorAll('nav button');
      navButtons.forEach(btn => {
        btn.classList.remove('text-green-700');
        btn.classList.add('text-gray-400');
      });

      const activeButton = document.querySelector(`button[aria-label="${section.charAt(0).toUpperCase() + section.slice(1)}"]`);
      if (activeButton) {
        activeButton.classList.remove('text-gray-400');
        activeButton.classList.add('text-green-700');
      }

      currentSection = section;
      
      // Show/hide sections
      const sections = document.querySelectorAll('section[data-section]');
      sections.forEach(sec => {
        if (sec.getAttribute('data-section') === section) {
          sec.style.display = '';
        } else {
          sec.style.display = 'none';
        }
      });

      // Keep grid layout on desktop (show all) if wide screen
      if (window.matchMedia('(min-width: 1280px)').matches) {
        sections.forEach(sec => { sec.style.display = ''; });
      }
    }

    // Keyboard navigation for Destinations slideshow
    document.addEventListener('keydown', function(e) {
      if (currentSection !== 'destinations') return;
      if (e.key === 'ArrowRight') { nextDestination(); }
      if (e.key === 'ArrowLeft') { prevDestination(); }
    });

    // Initialize visible sections
    window.addEventListener('resize', function() { navigateToSection(currentSection); });
    document.addEventListener('DOMContentLoaded', function() { navigateToSection(currentSection); });

    function calculateRoute() {
      const from = document.getElementById('dir-from').value.trim();
      const to = document.getElementById('dir-to').value.trim();
      const mode = document.getElementById('dir-mode').value;
      const map = document.getElementById('dir-map');
      if (!from || !to) {
        alert('Please enter both origin and destination.');
        return;
      }
      map.textContent = `Route (${mode}): ${from} → ${to}`;
    }

    // Packages data and renderer
    const packagesData = [
      {
        name: 'Western Ghats Explorer',
        places: ['Munnar', 'Thekkady', 'Vagamon', 'Athirappilly', 'Kochi'],
        nights: 6,
        days: 7,
        pricePerPerson: 24999,
        groupDiscount: '5% off for 4+, 10% off for 8+',
        perspective: 'Tea gardens, wildlife, waterfalls and heritage port city',
        highlights: ['Eravikulam NP', 'Periyar boat safari', 'Athirappilly Falls', 'Fort Kochi walk'],
        estimate: 'Travel 680 km total, avg 4.5h drive/day',
        image: 'Munnar_hillstation_kerala.jpg',
        tiers: [
          { name: 'Standard', multiplier: 1 },
          { name: 'Deluxe', multiplier: 1.25 },
          { name: 'Luxury', multiplier: 1.6 }
        ],
        discountRules: [ { min: 4, percent: 5 }, { min: 8, percent: 10 } ],
        inclusions: ['Daily breakfast', 'Private AC vehicle', 'Houseboat meals per plan', 'Sightseeing as per itinerary', 'Tolls, parking, driver'],
        exclusions: ['Flight/Train tickets', 'Personal expenses', 'Monument/safari tickets', 'GST as applicable', 'Optional activities'],
        itinerary: [
          { day: 1, title: 'Arrive Kochi → Munnar', transport: 'Private AC sedan/SUV', distance: '130 km', time: '4 hr', meals: '—', stay: 'Munnar hotel', details: 'Airport pickup, Cheeyappara waterfalls, Tea Museum road evening.' },
          { day: 2, title: 'Munnar sightseeing', transport: 'Private vehicle', distance: 'Local', time: '6-7 hr', meals: 'Breakfast', stay: 'Munnar hotel', details: 'Eravikulam NP, Top Station, Tea Museum, Echo Point, Mattupetty Dam.' },
          { day: 3, title: 'Munnar → Thekkady', transport: 'Private vehicle', distance: '90 km', time: '3 hr', meals: 'Breakfast', stay: 'Thekkady resort', details: 'Spice plantation walk, Kalaripayattu/Kathakali (optional).' },
          { day: 4, title: 'Periyar wildlife & boating', transport: 'Private + shared boat', distance: 'Local', time: '4-5 hr', meals: 'Breakfast', stay: 'Thekkady resort', details: 'Periyar Lake boat safari, bamboo rafting (optional).' },
          { day: 5, title: 'Thekkady → Vagamon', transport: 'Private vehicle', distance: '45 km', time: '2 hr', meals: 'Breakfast', stay: 'Vagamon stay', details: 'Pine Forest, meadows, paragliding (seasonal, optional).' },
          { day: 6, title: 'Vagamon → Athirappilly → Kochi', transport: 'Private vehicle', distance: '210 km', time: '6 hr', meals: 'Breakfast', stay: 'Kochi stay', details: 'Athirappilly & Vazhachal falls, Fort Kochi sunset.' },
          { day: 7, title: 'Kochi heritage & departure', transport: 'Private airport drop', distance: '40 km', time: '1 hr', meals: 'Breakfast', stay: '—', details: 'Synagogue, Dutch Palace, Chinese nets (time permitting).'}
        ]
      },
      {
        name: 'Backwaters & Beaches Retreat',
        places: ['Kumarakom', 'Alleppey', 'Kochi', 'Marari', 'Varkala', 'Kovalam'],
        nights: 7,
        days: 8,
        pricePerPerson: 28999,
        groupDiscount: '7% off for 5+, 12% off for 10+',
        perspective: 'Houseboats, bird sanctuaries and cliff beaches',
        highlights: ['Vembanad cruise', 'Bird Sanctuary', 'Fort Kochi', 'Varkala cliff sunset'],
        estimate: 'Travel 520 km total, avg 3.5h drive/day',
        image: 'alleppey-kerala-tourism-entry-fee-timings-holidays-reviews-header.jpg',
        tiers: [
          { name: 'Standard', multiplier: 1 },
          { name: 'Deluxe', multiplier: 1.2 },
          { name: 'Luxury', multiplier: 1.5 }
        ],
        discountRules: [ { min: 5, percent: 7 }, { min: 10, percent: 12 } ],
        inclusions: ['Breakfast daily', 'Private transfers', '1N Deluxe Houseboat with meals', 'All taxes, driver charges'],
        exclusions: ['Air/Rail fare', 'Personal expenses', 'Entry tickets', 'Optional activities', 'GST extra'],
        itinerary: [
          { day: 1, title: 'Arrive Kochi → Kumarakom', transport: 'Private AC sedan/SUV', distance: '55 km', time: '1.5 hr', meals: '—', stay: 'Kumarakom lakeside', details: 'Sunset by Vembanad Lake.' },
          { day: 2, title: 'Kumarakom Bird Sanctuary', transport: 'Private vehicle + walk', distance: 'Local', time: '3-4 hr', meals: 'Breakfast', stay: 'Kumarakom', details: 'Early birding trail, Ayurveda (optional).'},
          { day: 3, title: 'Kumarakom → Alleppey Houseboat', transport: 'Private + houseboat', distance: '35 km', time: '1 hr', meals: 'Lunch & Dinner on HB', stay: 'Deluxe Houseboat', details: 'Private cruise through canals; overnight onboard.'},
          { day: 4, title: 'Alleppey → Marari', transport: 'Private vehicle', distance: '15 km', time: '30 min', meals: 'Breakfast', stay: 'Marari beach resort', details: 'Beach day; village bicycle tour (optional).'},
          { day: 5, title: 'Marari → Varkala', transport: 'Private vehicle', distance: '135 km', time: '4 hr', meals: 'Breakfast', stay: 'Varkala cliff', details: 'Cliff walkway, cafés, sunset yoga (optional).'},
          { day: 6, title: 'Varkala → Kovalam', transport: 'Private vehicle', distance: '55 km', time: '1.5 hr', meals: 'Breakfast', stay: 'Kovalam resort', details: 'Lighthouse beach; Ayurveda spa.'},
          { day: 7, title: 'Kovalam & Trivandrum', transport: 'Private vehicle', distance: 'Local', time: '4 hr', meals: 'Breakfast', stay: 'Kovalam', details: 'Padmanabhaswamy Temple, Museum complex.'},
          { day: 8, title: 'Departure', transport: 'Private drop (TRV)', distance: '15 km', time: '30 min', meals: 'Breakfast', stay: '—', details: 'Airport drop.'}
        ]
      },
      {
        name: 'Malabar Heritage Trail',
        places: ['Calicut', 'Wayanad', 'Kannur', 'Bekal', 'Kasargod', 'Kochi'],
        nights: 8,
        days: 9,
        pricePerPerson: 31999,
        groupDiscount: '5% off for 4+, 10% off for 8+',
        perspective: 'Cuisine, forts and rainforest escapes in North Kerala',
        highlights: ['Kappad Beach', 'Edakkal Caves', 'Theyam (seasonal)', 'Bekal Fort'],
        estimate: 'Travel 780 km total, avg 4h drive/day',
        image: 'https://picsum.photos/seed/malabar/800/480',
        tiers: [
          { name: 'Standard', multiplier: 1 },
          { name: 'Deluxe', multiplier: 1.2 },
          { name: 'Luxury', multiplier: 1.45 }
        ],
        discountRules: [ { min: 4, percent: 5 }, { min: 8, percent: 10 } ],
        inclusions: ['Breakfast daily', 'Private vehicle or 2AC train (as noted)', 'Driver allowance, tolls, parking'],
        exclusions: ['Flights', 'Lunch/Dinner unless stated', 'Entry tickets', 'GST extra'],
        itinerary: [
          { day: 1, title: 'Arrive Calicut', transport: 'Airport pickup', distance: '—', time: '—', meals: '—', stay: 'Calicut', details: 'Coastal walk, Malabar cuisine.'},
          { day: 2, title: 'Calicut → Wayanad', transport: 'Private vehicle', distance: '85 km', time: '3 hr', meals: 'Breakfast', stay: 'Wayanad', details: 'Lakkidi view, Pookode Lake.'},
          { day: 3, title: 'Wayanad caves & falls', transport: 'Private vehicle', distance: 'Local', time: '6 hr', meals: 'Breakfast', stay: 'Wayanad', details: 'Edakkal Caves, Soochipara falls.'},
          { day: 4, title: 'Wayanad → Kannur', transport: 'Private vehicle', distance: '115 km', time: '3.5 hr', meals: 'Breakfast', stay: 'Kannur', details: 'Drive-in beach; Theyyam (seasonal).'},
          { day: 5, title: 'Kannur → Bekal', transport: 'Private vehicle', distance: '100 km', time: '3 hr', meals: 'Breakfast', stay: 'Bekal', details: 'Bekal Fort & beach.'},
          { day: 6, title: 'Bekal → Kasargod', transport: 'Private vehicle', distance: '20 km', time: '45 min', meals: 'Breakfast', stay: 'Kasargod', details: 'Chandragiri Fort, backwaters.'},
          { day: 7, title: 'Kasargod → Kochi', transport: 'Train (2AC) or Private', distance: '370 km', time: '5-8 hr', meals: 'Breakfast', stay: 'Kochi', details: 'Transfer to Kochi; Marine Drive.'},
          { day: 8, title: 'Fort Kochi Heritage', transport: 'Walk + vehicle', distance: 'Local', time: '4 hr', meals: 'Breakfast', stay: 'Kochi', details: 'Synagogue, Dutch Palace, Chinese nets.'},
          { day: 9, title: 'Departure', transport: 'Private drop', distance: '40 km', time: '1 hr', meals: 'Breakfast', stay: '—', details: 'Airport drop.'}
        ]
      },
      {
        name: 'Kerala Classic Circuit',
        places: ['Kochi', 'Munnar', 'Thekkady', 'Alleppey', 'Kovalam', 'Trivandrum'],
        nights: 9,
        days: 10,
        pricePerPerson: 34999,
        groupDiscount: '6% off for 5+, 11% off for 10+',
        perspective: 'Signature Kerala blend of hills, wildlife, backwaters and sea',
        highlights: ['Top Station', 'Periyar spice walk', 'Houseboat stay', 'Lighthouse beach'],
        estimate: 'Travel 900 km total, avg 4h drive/day',
        image: '1703_Thekkady2.jpg',
        tiers: [
          { name: 'Standard', multiplier: 1 },
          { name: 'Deluxe', multiplier: 1.2 },
          { name: 'Luxury', multiplier: 1.5 }
        ],
        discountRules: [ { min: 5, percent: 6 }, { min: 10, percent: 11 } ],
        inclusions: ['Breakfast daily', 'Private AC vehicle', '1N houseboat with meals', 'Driver, toll, parking'],
        exclusions: ['Flights', 'Entry fees', 'Personal expenses', 'GST extra'],
        itinerary: [
          { day: 1, title: 'Arrive Kochi', transport: 'Private pickup', distance: '—', time: '—', meals: '—', stay: 'Kochi', details: 'Harbor sunset (optional).'},
          { day: 2, title: 'Kochi → Munnar', transport: 'Private vehicle', distance: '130 km', time: '4 hr', meals: 'Breakfast', stay: 'Munnar', details: 'Waterfalls en route; Tea Museum.'},
          { day: 3, title: 'Munnar full day', transport: 'Private vehicle', distance: 'Local', time: '6 hr', meals: 'Breakfast', stay: 'Munnar', details: 'Eravikulam NP, Top Station.'},
          { day: 4, title: 'Munnar → Thekkady', transport: 'Private vehicle', distance: '90 km', time: '3 hr', meals: 'Breakfast', stay: 'Thekkady', details: 'Spice garden; martial arts show (optional).'},
          { day: 5, title: 'Periyar boat & walk', transport: 'Shared boat + private', distance: 'Local', time: '4 hr', meals: 'Breakfast', stay: 'Thekkady', details: 'Periyar Lake, spice market.'},
          { day: 6, title: 'Thekkady → Alleppey (HB)', transport: 'Private + houseboat', distance: '140 km', time: '4 hr', meals: 'Lunch & Dinner', stay: 'Houseboat', details: 'Backwater overnight.'},
          { day: 7, title: 'Alleppey → Kovalam', transport: 'Private vehicle', distance: '160 km', time: '4.5 hr', meals: 'Breakfast', stay: 'Kovalam', details: 'Beach leisure.'},
          { day: 8, title: 'Kovalam & Trivandrum', transport: 'Private vehicle', distance: 'Local', time: '4 hr', meals: 'Breakfast', stay: 'Kovalam', details: 'Temple & museum.'},
          { day: 9, title: 'Kovalam leisure', transport: '—', distance: '—', time: '—', meals: 'Breakfast', stay: 'Kovalam', details: 'Relax / Ayurveda.'},
          { day: 10, title: 'Departure', transport: 'Private drop (TRV)', distance: '15 km', time: '30 min', meals: 'Breakfast', stay: '—', details: 'Airport drop.'}
        ]
      },
      {
        name: 'Rainforest & Waterfalls Odyssey',
        places: ['Athirappilly', 'Sholayar', 'Vazhachal', 'Valparai', 'Parambikulam', 'Nelliyampathy', 'Kochi'],
        nights: 6,
        days: 7,
        pricePerPerson: 27999,
        groupDiscount: '5% off for 4+, 10% off for 8+',
        perspective: "Monsoon magic across Kerala's lush rainforest belt",
        highlights: ['Athirappilly-Vazhachal', 'Tea estates', 'Wildlife night safari'],
        estimate: 'Travel 620 km total, avg 3.5h drive/day',
        image: 'athirapally-falls-in.jpg',
        tiers: [
          { name: 'Standard', multiplier: 1 },
          { name: 'Deluxe', multiplier: 1.15 },
          { name: 'Luxury', multiplier: 1.4 }
        ],
        discountRules: [ { min: 4, percent: 5 }, { min: 8, percent: 10 } ],
        inclusions: ['Breakfast daily', 'Private AC vehicle', 'Forest entry/vehicle extra (as applicable)'],
        exclusions: ['Flights', 'Entry fees', 'Personal expenses', 'GST extra'],
        itinerary: [
          { day: 1, title: 'Arrive Kochi → Athirappilly', transport: 'Private vehicle', distance: '70 km', time: '2 hr', meals: '—', stay: 'Athirappilly', details: 'Settle in near falls.'},
          { day: 2, title: 'Athirappilly & Vazhachal', transport: 'Private + walk', distance: 'Local', time: '4 hr', meals: 'Breakfast', stay: 'Athirappilly', details: 'Rainforest trail and viewpoints.'},
          { day: 3, title: 'Athirappilly → Valparai', transport: 'Private vehicle', distance: '120 km', time: '4 hr', meals: 'Breakfast', stay: 'Valparai', details: 'Hairpin bends; tea estates.'},
          { day: 4, title: 'Valparai → Parambikulam', transport: 'Private + forest vehicle', distance: '110 km', time: '4 hr', meals: 'Breakfast', stay: 'Parambikulam', details: 'Tiger Reserve safari (subject to slots).'},
          { day: 5, title: 'Parambikulam → Nelliyampathy', transport: 'Private vehicle', distance: '120 km', time: '4 hr', meals: 'Breakfast', stay: 'Nelliyampathy', details: 'Viewpoints; estates.'},
          { day: 6, title: 'Nelliyampathy → Kochi', transport: 'Private vehicle', distance: '180 km', time: '5 hr', meals: 'Breakfast', stay: 'Kochi', details: 'Fort Kochi cafés.'},
          { day: 7, title: 'Departure', transport: 'Private airport drop', distance: '40 km', time: '1 hr', meals: 'Breakfast', stay: '—', details: 'Drop at COK.'}
        ]
      }
    ];

    function renderPackages() {
      const wrap = document.getElementById('packages-scroll');
      if (!wrap) return;
      wrap.innerHTML = packagesData.map(p => `
        <div class="bg-white rounded-2xl shadow mb-4 overflow-hidden border border-gray-100">
          <div class="h-36 w-full overflow-hidden">
            <img src="${p.image}" alt="${p.name}" class="w-full h-full object-cover" onerror="this.src='https://picsum.photos/seed/kerala${encodeURIComponent(p.name)}/800/480'">
          </div>
          <div class="p-4">
            <div class="flex justify-between items-start">
              <h3 class="text-base font-bold">${p.name}</h3>
              <span class="text-xs bg-green-100 text-green-700 rounded px-2">₹${p.pricePerPerson.toLocaleString()} pp</span>
            </div>
            <div class="text-[11px] text-gray-600 mt-1">
              <span>${p.days}D/${p.nights}N</span>
              <span class="mx-1">·</span>
              <span>${p.estimate}</span>
            </div>
            <p class="text-xs text-gray-700 mt-2">${p.perspective}</p>
            <div class="mt-2 flex flex-wrap gap-1 text-[11px]">
              ${p.places.map(pl => `<span class=\"px-2 py-1 rounded-full bg-gray-100\">${pl}</span>`).join('')}
            </div>
            <div class="mt-2 text-[11px] text-gray-600">
              Highlights: ${p.highlights.join(', ')}
            </div>
            <div class="mt-2 flex justify-between items-center">
              <span class="text-[11px] text-green-700 font-semibold">Group: ${p.groupDiscount}</span>
              <button class="bg-green-700 text-white px-3 py-2 rounded-full text-xs font-semibold" onclick="bookPackage('${p.name}')">Book Package</button>
            </div>
          </div>
        </div>
      `).join('');
    }

    function showPackagesContent() { navigateToSection('packages'); renderPackages(); }
    function bookPackage(name) { showPackageDetails(name); }
    function showPackageDetails(name) {
      const pkg = packagesData.find(p => p.name === name);
      if (!pkg) return;
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      const daysHtml = (pkg.itinerary || []).map(d => `
        <div class="border border-gray-200 rounded-lg p-3 mb-2 bg-gray-50">
          <div class="flex justify-between items-start">
            <div>
              <p class="text-sm font-semibold">Day ${d.day}: ${d.title}</p>
              <p class="text-xs text-gray-600 mt-1">Transport: ${d.transport} · Distance: ${d.distance} · Time: ${d.time}</p>
            </div>
            <span class="text-[10px] px-2 py-0.5 rounded-full bg-green-100 text-green-700">${pkg.days}D/${pkg.nights}N</span>
          </div>
          <p class="text-xs text-gray-700 mt-2">${d.details}</p>
          <div class="mt-2 text-[11px] text-gray-600">Meals: ${d.meals} · Stay: ${d.stay}</div>
        </div>
      `).join('');
      const tierOptions = (pkg.tiers || [{name:'Standard',multiplier:1}]).map((t,i)=>`<option value="${t.multiplier}" ${i===0?'selected':''}>${t.name}</option>`).join('');
      const discountText = (pkg.discountRules||[]).map(r=>`${r.percent}% for ${r.min}+`).join(', ');
      modal.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 w-full max-w-md max-h-[85vh] overflow-y-auto">
          <div class="flex justify-between items-center mb-3">
            <h3 class="text-lg font-bold">${pkg.name}</h3>
            <button class="text-gray-500 text-xl" onclick="this.closest('.fixed').remove()">×</button>
          </div>
          <div class="rounded-xl overflow-hidden mb-3 h-36">
            <img src="${pkg.image}" alt="${pkg.name}" class="w-full h-full object-cover">
          </div>
          <div class="text-[11px] text-gray-700 mb-2"><span class="font-semibold">Perspective:</span> ${pkg.perspective}</div>
          <div class="text-[11px] text-gray-600 mb-3">Highlights: ${pkg.highlights.join(', ')}</div>
          <div class="flex justify-between items-center mb-3 text-[11px]">
            <span>Duration: ${pkg.days}D/${pkg.nights}N</span>
            <span>Est.: ${pkg.estimate}</span>
            <span>Group: ${pkg.groupDiscount}</span>
          </div>
          <div class="grid grid-cols-2 gap-2 mb-3 text-[11px]">
            <label class="flex flex-col">Tier<select id="tier" class="border rounded px-2 py-1">${tierOptions}</select></label>
            <label class="flex flex-col">Group Size<input id="grp" type="number" min="1" value="2" class="border rounded px-2 py-1"/></label>
          </div>
          <div class="flex items-center justify-between text-[11px] mb-1">
            <span id="pp" class="text-green-700 font-bold"></span>
            <span id="total" class="font-semibold"></span>
          </div>
          <div id="disc" class="text-[10px] text-gray-600 mb-3">${discountText ? 'Discounts: '+discountText : ''}</div>
          <div class="mb-3">
            <p class="text-sm font-semibold mb-1">Inclusions</p>
            <ul class="list-disc ml-5 text-xs text-gray-700">${(pkg.inclusions||[]).map(i=>`<li>${i}</li>`).join('')}</ul>
          </div>
          <div class="mb-3">
            <p class="text-sm font-semibold mb-1">Exclusions</p>
            <ul class="list-disc ml-5 text-xs text-gray-700">${(pkg.exclusions||[]).map(i=>`<li>${i}</li>`).join('')}</ul>
          </div>
          <div class="text-sm font-semibold mb-2">Itinerary</div>
          ${daysHtml}
          <div class="mt-4 flex justify-between items-center">
            <span class="text-green-700 font-bold">Base: ₹${pkg.pricePerPerson.toLocaleString()} pp</span>
            <button class="bg-green-700 text-white px-4 py-2 rounded-full text-xs font-semibold" onclick="alert('Proceed to booking flow (coming soon)')">Proceed</button>
          </div>
        </div>`;
      document.body.appendChild(modal);
      (function(){
        const base = pkg.pricePerPerson;
        const rules = pkg.discountRules || [];
        const tierEl = modal.querySelector('#tier');
        const grpEl = modal.querySelector('#grp');
        const ppEl = modal.querySelector('#pp');
        const totalEl = modal.querySelector('#total');
        const discEl = modal.querySelector('#disc');
        function calc(){
          const people = Math.max(1, parseInt(grpEl.value || '1'));
          const mult = parseFloat(tierEl.value || '1');
          let discount = 0; rules.forEach(r=>{ if(people>=r.min) discount = Math.max(discount, r.percent); });
          const pp = Math.round(base*mult*(1-discount/100));
          ppEl.textContent = '₹'+pp.toLocaleString()+' pp';
          totalEl.textContent = '₹'+(pp*people).toLocaleString()+' total';
          if (rules.length) discEl.textContent = (discountText? ('Discounts: '+discountText+' | ') : '') + (discount>0? ('-'+discount+'% applied') : 'No group discount');
        }
        tierEl.addEventListener('change', calc);
        grpEl.addEventListener('input', calc);
        calc();
      })();
    }

    // Destinations list (legacy) and slideshow renderer
    const destinationsData = [
      {
        name: 'Wayanad',
        image: 'https://storage.googleapis.com/a1aa/image/eb95a9e6-e9a5-4f50-8bbc-25eef0afb6b3.jpg',
        description: 'Forest-clad highlands with wildlife sanctuaries, waterfalls, Edakkal Caves and scenic treks.',
        rating: 4.6,
        reviews: 1284,
        duration: '2–3 days',
        fees: 'Most spots free; Edakkal Caves ~₹50',
        bestTime: 'Oct–Mar'
      },
      {
        name: 'Munnar',
        image: 'https://storage.googleapis.com/a1aa/image/4cbcd9d2-7bba-4019-8eab-e8427443f436.jpg',
        description: 'Rolling tea gardens, misty valleys, Eravikulam NP and viewpoints like Top Station.',
        rating: 4.7,
        reviews: 2011,
        duration: '2–3 days',
        fees: 'Eravikulam NP ~₹200',
        bestTime: 'Sep–Mar'
      },
      {
        name: 'Alappuzha (Alleppey)',
        image: 'https://storage.googleapis.com/a1aa/image/396d76a5-f025-4006-eb1e-393ee1bbc027.jpg',
        description: 'Backwater paradise with houseboat cruises, narrow canals and Vembanad Lake vistas.',
        rating: 4.5,
        reviews: 1532,
        duration: '1–2 days',
        fees: 'Houseboats vary (₹6k–₹15k/night)',
        bestTime: 'Nov–Feb'
      },
      {
        name: 'Kochi (Fort Kochi)',
        image: 'https://storage.googleapis.com/a1aa/image/dd0cd2bf-14a9-4f08-fb91-b5319f84314b.jpg',
        description: 'Historic port city with Chinese fishing nets, spice markets and heritage streets.',
        rating: 4.4,
        reviews: 1876,
        duration: '1–2 days',
        fees: 'Mostly free; museum tickets ₹20–₹150',
        bestTime: 'Aug–Mar'
      },
      {
        name: 'Kumarakom',
        image: 'https://storage.googleapis.com/a1aa/image/4121c854-48c8-4fe2-37ff-5026ea97627a.jpg',
        description: 'Lakeside retreats and the Kumarakom Bird Sanctuary on Vembanad Lake.',
        rating: 4.5,
        reviews: 932,
        duration: '1–2 days',
        fees: 'Bird Sanctuary ~₹100',
        bestTime: 'Nov–Feb'
      },
      {
        name: 'Thekkady (Periyar)',
        image: 'https://storage.googleapis.com/a1aa/image/650bb2a0-c5bd-417b-298e-6498809183cd.jpg',
        description: 'Periyar Tiger Reserve, boat safaris, spice plantations and bamboo rafting.',
        rating: 4.6,
        reviews: 1410,
        duration: '1–2 days',
        fees: 'Periyar entry ~₹150; boat ~₹255',
        bestTime: 'Oct–Mar'
      },
      {
        name: 'Varkala',
        image: 'https://storage.googleapis.com/a1aa/image/a4d18961-0fc6-4c92-b6aa-736d675ca07d.jpg',
        description: 'Cliff-fringed beaches, cafes, mineral springs and striking Arabian Sea sunsets.',
        rating: 4.6,
        reviews: 1182,
        duration: '1–2 days',
        fees: 'Beach free',
        bestTime: 'Nov–Mar'
      },
      {
        name: 'Kovalam',
        image: 'https://storage.googleapis.com/a1aa/image/4cbcd9d2-7bba-4019-8eab-e8427443f436.jpg',
        description: 'Lighthouse-topped headland, crescent beaches and Ayurvedic wellness retreats.',
        rating: 4.4,
        reviews: 990,
        duration: '1–2 days',
        fees: 'Beach free; lighthouse ~₹20',
        bestTime: 'Oct–Mar'
      },
      {
        name: 'Athirappilly Waterfalls',
        image: 'https://storage.googleapis.com/a1aa/image/396d76a5-f025-4006-eb1e-393ee1bbc027.jpg',
        description: "Kerala's Niagara cascading through lush rainforest; superb in monsoon.",
        rating: 4.5,
        reviews: 845,
        duration: 'Half–1 day',
        fees: 'Entry ~₹50',
        bestTime: 'Jun–Oct'
      },
      {
        name: 'Bekal Fort',
        image: 'https://storage.googleapis.com/a1aa/image/653235bc-8b62-4158-f9cd-87fc55569d81.jpg',
        description: 'Seaside laterite fort with sweeping sea views and a tranquil beach.',
        rating: 4.4,
        reviews: 721,
        duration: 'Half day',
        fees: 'Entry ~₹25',
        bestTime: 'Oct–Feb'
      },
      {
        name: 'Ponmudi',
        image: 'https://picsum.photos/seed/ponmudi/800/480',
        description: 'Serene hill station near Thiruvananthapuram with hairpin bends and tea gardens.',
        rating: 4.3,
        reviews: 504,
        duration: '1 day',
        fees: 'Road/entry ~₹20',
        bestTime: 'Sep–Feb'
      }
    ];

    function renderDestinationsList() {
      const container = document.getElementById('destinations-scroll');
      if (!container) return;
      const makeCard = (d) => `
        <div class="bg-white rounded-2xl shadow-md p-4 mb-5">
          <div class="relative h-40 mb-3">
            <img src="${d.image}" alt="${d.name}" class="w-full h-full object-cover rounded-xl">
            <button aria-label="Share" class="absolute top-2 right-2 bg-white/90 rounded-full p-2 shadow" onclick="shareStay('${d.name}')"><i class="fas fa-share"></i></button>
          </div>
          <div class="flex justify-between items-start mb-2">
            <h3 class="text-base font-bold">${d.name}</h3>
            <span class="text-xs bg-green-100 text-green-700 rounded px-2">${d.rating.toFixed(1)} ⭐</span>
          </div>
          <div class="flex items-center gap-2 text-[11px] text-gray-600 mb-2">
            <span>${d.reviews.toLocaleString()} reviews</span>
            <span>·</span>
            <span>Best time: ${d.bestTime}</span>
          </div>
          <p class="text-xs text-gray-600 mb-3">${d.description}</p>
          <div class="flex flex-wrap gap-2 text-[11px] mb-3">
            <span class="px-2 py-1 rounded-full bg-gray-100 text-gray-700">Visit: ${d.duration}</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 text-gray-700">Fees: ${d.fees}</span>
          </div>
          <div class="flex justify-between items-center">
            <div class="flex items-center space-x-4 text-gray-600">
              <button class="flex items-center gap-1" onclick="toggleLike(this.querySelector('i'))"><i class="far fa-heart"></i><span class="text-xs">Like</span></button>
              <button class="flex items-center gap-1" onclick="showComments(this.querySelector('i'))"><i class="far fa-comment"></i><span class="text-xs">Comment</span></button>
            </div>
            <button class="bg-green-700 text-white px-4 py-2 rounded-full text-xs font-semibold" onclick="bookDestination('${d.name}')">Book a Trip</button>
          </div>
        </div>`;
      container.innerHTML = destinationsData.map(makeCard).join('');
    }

    // Slideshow data for 6 destinations
    const destinationSlides = [
      {
        name: 'Munnar',
        photos: [
          'Munnar_hillstation_kerala.jpg',
          'https://picsum.photos/seed/munnar1/800/480',
          'https://picsum.photos/seed/munnar2/800/480',
          'https://picsum.photos/seed/munnar3/800/480',
          'https://picsum.photos/seed/munnar4/800/480'
        ],
        description: "Munnar is Kerala's iconic hill station with rolling tea plantations, misty valleys, waterfalls and trekking trails.",
        history: 'Developed as a tea estate town during the British era, Munnar became a high-range escape known for its cool climate and the Neelakurinji bloom every 12 years.',
        rating: 4.7,
        reviews: 2011,
        duration: '2–3 days',
        fees: 'Eravikulam NP ~₹200',
        bestTime: 'Sep–Mar'
      },
      {
        name: 'Thekkady (Periyar)',
        photos: [
          'data:image/jpeg;base64,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',
          'https://picsum.photos/seed/thekkady1/800/480',
          'https://picsum.photos/seed/thekkady2/800/480',
          'https://picsum.photos/seed/thekkady3/800/480'
        ],
        description: 'Home to Periyar Tiger Reserve with lake safaris, spice gardens and bamboo rafting.',
        history: 'Periyar Reserve was established in 1934 around the Mullaperiyar Dam lake; its rich biodiversity draws researchers and nature lovers.',
        rating: 4.6,
        reviews: 1410,
        duration: '1–2 days',
        fees: 'Entry ~₹150; boat ~₹255',
        bestTime: 'Oct–Mar'
      },
      {
        name: 'Athirappilly Waterfalls',
        photos: [
          'athirapally-falls-in.jpg',
          'https://picsum.photos/seed/athira1/800/480',
          'https://picsum.photos/seed/athira2/800/480',
          'https://picsum.photos/seed/athira3/800/480'
        ],
        description: "Kerala's Niagara, a dramatic cascade through the Sholayar rainforest, spectacular in monsoon.",
        history: 'The Chalakudy River forms the falls; the surrounding forests host hornbills and diverse endemic flora.',
        rating: 4.5,
        reviews: 845,
        duration: 'Half–1 day',
        fees: 'Entry ~₹50',
        bestTime: 'Jun–Oct'
      },
      {
        name: 'Kochi (Fort Kochi)',
        photos: [
          'https://picsum.photos/seed/kochi1/800/480',
          'https://picsum.photos/seed/kochi2/800/480',
          'https://picsum.photos/seed/kochi3/800/480'
        ],
        description: "Historic port city with Chinese fishing nets, spice markets, synagogues and art cafés.",
        history: "A crossroads of Arab, Portuguese, Dutch and British trade for centuries, visible in Fort Kochi's architecture.",
        rating: 4.4,
        reviews: 1876,
        duration: '1–2 days',
        fees: 'Museums ₹20–₹150',
        bestTime: 'Aug–Mar'
      },
      {
        name: 'Alappuzha (Alleppey)',
        photos: [
          'alleppey-kerala-tourism-entry-fee-timings-holidays-reviews-header.jpg',
          'https://picsum.photos/seed/alleppey1/800/480',
          'https://picsum.photos/seed/alleppey2/800/480',
          'https://picsum.photos/seed/alleppey3/800/480'
        ],
        description: 'Dreamy backwaters, houseboat cruises and paddy fields along Vembanad Lake.',
        history: "Once a thriving coir and spice hub, Alleppey grew into Kerala's backwater tourism capital.",
        rating: 4.5,
        reviews: 1532,
        duration: '1–2 days',
        fees: 'Houseboats vary (₹6k–₹15k/night)',
        bestTime: 'Nov–Feb'
      },
      {
        name: 'Kumarakom',
        photos: [
          'https://picsum.photos/seed/kumar1/800/480',
          'https://picsum.photos/seed/kumar2/800/480',
          'https://picsum.photos/seed/kumar3/800/480'
        ],
        description: 'Lakeside village retreats and the renowned Kumarakom Bird Sanctuary.',
        history: 'Part of the Vembanad wetland system; conservation efforts sustain migratory bird habitats.',
        rating: 4.5,
        reviews: 932,
        duration: '1–2 days',
        fees: 'Bird Sanctuary ~₹100',
        bestTime: 'Nov–Feb'
      }
    ];

    let currentDestinationIndex = 0;
    let currentPhotoIndex = 0;

    function renderDestinationSlideshow() {
      const container = document.getElementById('destinations-scroll');
      if (!container) return;
      const d = destinationSlides[currentDestinationIndex];
      const photo = d.photos[currentPhotoIndex % d.photos.length];
      container.innerHTML = `
        <div class="relative rounded-2xl overflow-hidden">
          <img src="${photo}" alt="${d.name}" class="w-full h-48 sm:h-60 object-cover rounded-2xl" onerror="nextPhoto()">
          <div class="absolute inset-0 flex items-center justify-between px-2">
            <button aria-label="Prev photo" class="bg-white/90 hover:bg-white shadow rounded-full p-2" onclick="prevPhoto()"><i class="fas fa-chevron-left"></i></button>
            <button aria-label="Next photo" class="bg-white/90 hover:bg-white shadow rounded-full p-2" onclick="nextPhoto()"><i class="fas fa-chevron-right"></i></button>
          </div>
          <div class="absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1">
            ${d.photos.map((_,i)=>`<span class=\"w-2 h-2 rounded-full ${i===currentPhotoIndex?'bg-white':'bg-white/60'}\"></span>`).join('')}
          </div>
        </div>
        <div class="mt-4">
          <div class="flex justify-between items-start mb-1">
            <h3 class="text-base font-bold">${d.name}</h3>
            <span class="text-xs bg-green-100 text-green-700 rounded px-2">${d.rating.toFixed(1)} ⭐</span>
          </div>
          <div class="flex items-center gap-2 text-[11px] text-gray-600 mb-2">
            <span>${d.reviews.toLocaleString()} reviews</span>
            <span>·</span>
            <span>Best time: ${d.bestTime}</span>
          </div>
          <p class="text-xs text-gray-700 mb-3">${d.description}</p>
          <div class="text-[11px] text-gray-700 mb-3 space-x-2">
            <span class="px-2 py-1 rounded-full bg-gray-100">Visit: ${d.duration}</span>
            <span class="px-2 py-1 rounded-full bg-gray-100">Fees: ${d.fees}</span>
          </div>
          <div class="text-xs text-gray-600 mb-4">
            <p class="font-semibold mb-1">History</p>
            <p>${d.history}</p>
          </div>
          <div class="flex justify-between items-center">
            <div class="flex items-center space-x-4 text-gray-600">
              <button class="flex items-center gap-1" onclick="toggleLike(this.querySelector('i'))"><i class="far fa-heart"></i><span class="text-xs">Like</span></button>
              <button class="flex items-center gap-1" onclick="showComments(this.querySelector('i'))"><i class="far fa-comment"></i><span class="text-xs">Comment</span></button>
            </div>
            <button class="bg-green-700 text-white px-4 py-2 rounded-full text-xs font-semibold" onclick="bookDestination('${d.name}')">Book my Trip</button>
          </div>
        </div>
        <div class="mt-4 flex justify-between">
          <button class="px-3 py-2 rounded-lg border text-xs" onclick="prevDestination()">Prev place</button>
          <button class="px-3 py-2 rounded-lg border text-xs" onclick="nextDestination()">Next place</button>
        </div>
      `;
    }

    function nextDestination() {
      currentDestinationIndex = (currentDestinationIndex + 1) % destinationSlides.length;
      currentPhotoIndex = 0;
      renderDestinationSlideshow();
    }
    function prevDestination() {
      currentDestinationIndex = (currentDestinationIndex - 1 + destinationSlides.length) % destinationSlides.length;
      currentPhotoIndex = 0;
      renderDestinationSlideshow();
    }
    function nextPhoto() {
      const d = destinationSlides[currentDestinationIndex];
      currentPhotoIndex = (currentPhotoIndex + 1) % d.photos.length;
      renderDestinationSlideshow();
    }
    function prevPhoto() {
      const d = destinationSlides[currentDestinationIndex];
      currentPhotoIndex = (currentPhotoIndex - 1 + d.photos.length) % d.photos.length;
      renderDestinationSlideshow();
    }
    function scrollDestinations(delta) {
      const container = document.getElementById('destinations-scroll');
      if (!container) return;
      container.scrollBy({ top: delta, behavior: 'smooth' });
    }

    function showHomeContent() {
      // Show the left phone content (home)
      console.log('Showing home content');
    }

    function showDestinationsContent() {
      // Show the middle phone content (destinations)
      console.log('Showing destinations content');
    }

    function showDirectionsContent() {
      // Show directions functionality
      console.log('Showing directions content');
    }

    function showStaysContent() {
      // Show the right phone content (stays)
      console.log('Showing stays content');
    }

    // Menu and profile functions
    function toggleMenu(button) {
      const menu = document.createElement('div');
      menu.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      menu.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 max-w-sm w-full">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">Menu</h3>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-500 text-xl">×</button>
          </div>
          <div class="space-y-3">
            <button class="w-full text-left p-3 rounded-lg hover:bg-gray-100" onclick="navigateToSection('home')">Home</button>
            <button class="w-full text-left p-3 rounded-lg hover:bg-gray-100" onclick="navigateToSection('destinations')">Destinations</button>
            <button class="w-full text-left p-3 rounded-lg hover:bg-gray-100" onclick="navigateToSection('stays')">Stays</button>
            <button class="w-full text-left p-3 rounded-lg hover:bg-gray-100" onclick="navigateToSection('directions')">Directions</button>
            <button class="w-full text-left p-3 rounded-lg hover:bg-gray-100" onclick="showSettings()">Settings</button>
          </div>
        </div>
      `;
      document.body.appendChild(menu);
    }

    function showProfile() {
      const saved = JSON.parse(localStorage.getItem('userProfile') || 'null');
      if (!saved) { openAuthModal(); return; }
      const profile = document.createElement('div');
      profile.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      profile.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 max-w-sm w-full">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">Profile</h3>
            <button onclick="this.parentElement.parentElement.parentElement.remove(); showToast('Closed')" class="text-gray-500 text-xl">×</button>
          </div>
          <div class="text-center">
            <img src="${saved.photoURL || 'https://storage.googleapis.com/a1aa/image/a74065d2-1ec0-4a5e-b775-f5486818be47.jpg'}" class="w-20 h-20 rounded-full mx-auto mb-4" alt="Profile">
            <h4 class="font-bold text-lg">${saved.name || 'Guest'}</h4>
            ${saved.email ? `<p class=\"text-xs text-gray-500\">${saved.email}</p>` : ''}
            <div class="mt-4 grid grid-cols-2 gap-2 text-xs">
              <button class="border border-gray-300 py-2 rounded-lg" onclick="showToast('Opening bookings...')">Bookings</button>
              <button class="border border-gray-300 py-2 rounded-lg" onclick="showToast('Opening wishlist...')">Wishlist</button>
              <button class="border border-gray-300 py-2 rounded-lg" onclick="showToast('Opening payments...')">Payments</button>
              <button class="border border-gray-300 py-2 rounded-lg" onclick="showToast('Opening settings...')">Settings</button>
            </div>
            <div class="mt-4 text-left text-sm text-gray-700 space-y-1">
              ${saved.phone ? `<div><span class=\"text-gray-500\">Phone:</span> ${saved.phone}</div>` : ''}
              ${saved.address ? `<div><span class=\"text-gray-500\">Address:</span> ${saved.address}</div>` : ''}
              ${saved.city ? `<div><span class=\"text-gray-500\">City:</span> ${saved.city}</div>` : ''}
              ${saved.state ? `<div><span class=\"text-gray-500\">State:</span> ${saved.state}</div>` : ''}
              ${saved.country ? `<div><span class=\"text-gray-500\">Country:</span> ${saved.country}</div>` : ''}
            </div>
            <div class="mt-4 grid grid-cols-2 gap-2">
              <button class="w-full border border-gray-300 py-2 rounded-lg" onclick="openAuthModal(); showToast('Edit profile')">Edit Details</button>
              <button class="w-full bg-red-600 text-white py-2 rounded-lg" onclick="signOutUser()">Sign out</button>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(profile);
    }

    function showNotifications() {
      const notifications = document.createElement('div');
      notifications.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      notifications.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 max-w-sm w-full">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">Notifications</h3>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-500 text-xl">×</button>
          </div>
          <div class="space-y-3">
            <div class="p-3 bg-green-50 rounded-lg">
              <p class="text-sm font-medium">New destination added!</p>
              <p class="text-xs text-gray-600">Wayanad is now available for booking</p>
            </div>
            <div class="p-3 bg-blue-50 rounded-lg">
              <p class="text-sm font-medium">Special offer</p>
              <p class="text-xs text-gray-600">20% off on all stays this weekend</p>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(notifications);
    }

    // Service functions
    function handleServiceClick(service) {
      const serviceMap = {
        'Trips': () => showTripsContent(),
        'Packages': () => { navigateToSection('packages'); renderPackages(); },
        'Stays': () => navigateToSection('stays'),
        'Travel Desk': () => showTravelDesk(),
        'Directions': () => navigateToSection('directions')
      };

      if (serviceMap[service]) {
        serviceMap[service]();
      }
    }

    function showTripsContent() {
      alert('Trips section - Coming soon!');
    }

    function showPackagesContent() {
      alert('Packages section - Coming soon!');
    }

    function showTravelDesk() {
      alert('Travel Desk - Coming soon!');
    }

    // Destination functions
    function showDestinationDetails(destination) {
      const details = document.createElement('div');
      details.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      details.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 max-w-md w-full">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">${destination}</h3>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-500 text-xl">×</button>
          </div>
          <div class="space-y-4">
            <img src="https://storage.googleapis.com/a1aa/image/f76050c7-38b6-45fc-c989-40b01444123d.jpg" class="w-full h-40 object-cover rounded-lg" alt="${destination}">
            <p class="text-sm text-gray-600">Discover the beauty of ${destination} with our curated travel experiences.</p>
            <div class="flex space-x-2">
              <button class="flex-1 bg-green-700 text-white py-2 rounded-lg" onclick="bookDestination('${destination}')">Book Now</button>
              <button class="flex-1 border border-gray-300 py-2 rounded-lg" onclick="addToFavorites('${destination}')">Add to Favorites</button>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(details);
    }

    function bookDestination(destination) {
      alert(`Booking ${destination} - Coming soon!`);
    }

    function addToFavorites(destination) {
      alert(`${destination} added to favorites!`);
    }

    // Stay functions
    function showStayDetails(stayName) {
      const details = document.createElement('div');
      details.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      details.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 max-w-md w-full">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">${stayName}</h3>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-500 text-xl">×</button>
          </div>
          <div class="space-y-4">
            <img src="https://storage.googleapis.com/a1aa/image/653235bc-8b62-4158-f9cd-87fc55569d81.jpg" class="w-full h-40 object-cover rounded-lg" alt="${stayName}">
            <div class="flex justify-between items-center">
              <div>
                <p class="font-bold text-lg">₹2,500/night</p>
                <p class="text-sm text-gray-600">4.5 ⭐ (128 reviews)</p>
              </div>
              <div class="flex space-x-2">
                <button class="p-2 rounded-full border border-gray-300" onclick="toggleLike(this)">
                  <i class="far fa-heart"></i>
                </button>
                <button class="p-2 rounded-full border border-gray-300" onclick="shareStay('${stayName}')">
                  <i class="fas fa-share"></i>
                </button>
              </div>
            </div>
            <p class="text-sm text-gray-600">Experience luxury in the heart of nature with modern amenities and traditional hospitality.</p>
            <button class="w-full bg-green-700 text-white py-3 rounded-lg font-semibold" onclick="bookStay('${stayName}')">Book Now</button>
          </div>
        </div>
      `;
      document.body.appendChild(details);
    }

    function bookStay(stayName) {
      alert(`Booking ${stayName} - Coming soon!`);
    }

    function shareStay(stayName) {
      if (navigator.share) {
        navigator.share({
          title: stayName,
          text: `Check out ${stayName} on our travel app!`,
          url: window.location.href
        });
      } else {
        alert(`Sharing ${stayName} - Coming soon!`);
      }
    }

    // Like and comment functions
    function toggleLike(button) {
      const isHeart = button.classList.contains('fa-heart');
      const isThumbsUp = button.classList.contains('fa-thumbs-up');
      
      if (isHeart) {
        button.classList.toggle('far');
        button.classList.toggle('fas');
        button.classList.toggle('text-red-500');
      } else if (isThumbsUp) {
        button.classList.toggle('far');
        button.classList.toggle('fas');
        button.classList.toggle('text-blue-500');
      }
    }

    function showComments(button) {
      const comments = document.createElement('div');
      comments.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      comments.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 max-w-md w-full max-h-96 overflow-y-auto">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">Comments</h3>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-500 text-xl">×</button>
          </div>
          <div class="space-y-3">
            <div class="p-3 bg-gray-50 rounded-lg">
              <p class="text-sm font-medium">Sarah M.</p>
              <p class="text-xs text-gray-600">Amazing place! Highly recommended.</p>
            </div>
            <div class="p-3 bg-gray-50 rounded-lg">
              <p class="text-sm font-medium">John D.</p>
              <p class="text-xs text-gray-600">Great experience, will visit again.</p>
            </div>
          </div>
          <div class="mt-4 flex space-x-2">
            <input type="text" placeholder="Add a comment..." class="flex-1 p-2 border border-gray-300 rounded-lg text-sm">
            <button class="bg-green-700 text-white px-4 py-2 rounded-lg text-sm">Post</button>
          </div>
        </div>
      `;
      document.body.appendChild(comments);
    }

    // Search functionality
    function handleSearch(event) {
      const query = event.target.value.toLowerCase();
      console.log('Searching for:', query);
    }

    function performSearch(query) {
      alert(`Searching for: ${query}`);
    }

    function renderHomeHotels() {
      const container = document.getElementById('home-hotels');
      if (!container) return;
      container.innerHTML = '';
      const top = [...staysData].sort((a,b)=> b.rating - a.rating).slice(0, 12);
      top.forEach((s, i) => {
        const tile = document.createElement('div');
        tile.className = 'min-w-[140px] rounded-xl overflow-hidden relative cursor-pointer touch-target btn-active hover:scale-105 transition-transform';
        tile.onclick = () => showStayDetails(s.name);
        tile.innerHTML = `
          <img src="https://picsum.photos/seed/${encodeURIComponent(s.name)}H${i}/400/260" alt="${s.name}" class="w-full h-[100px] object-cover rounded-xl">
          <div class="absolute top-2 left-2 bg-black bg-opacity-50 text-white text-[10px] rounded px-1">${(s.type||'Hotel')}</div>
          <p class="text-xs mt-1 text-gray-700 truncate">${s.name}</p>
          <div class="flex items-center gap-1 text-[10px] text-gray-600"><span>⭐ ${s.rating.toFixed(1)}</span><span>·</span><span>${s.price? '₹'+s.price.toLocaleString(): ''}</span></div>
        `;
        container.appendChild(tile);
      });
    }

    // Location functions
    function getCurrentLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function(position) {
            alert(`Location: ${position.coords.latitude}, ${position.coords.longitude}`);
          },
          function(error) {
            alert('Unable to get location. Please enable location services.');
          }
        );
      } else {
        alert('Geolocation is not supported by this browser.');
      }
    }

    function showMoreOptions() {
      const options = document.createElement('div');
      options.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      options.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 max-w-sm w-full">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">More Options</h3>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-500 text-xl">×</button>
          </div>
          <div class="space-y-3">
            <button class="w-full text-left p-3 rounded-lg hover:bg-gray-100" onclick="shareContent()">Share</button>
            <button class="w-full text-left p-3 rounded-lg hover:bg-gray-100" onclick="reportContent()">Report</button>
            <button class="w-full text-left p-3 rounded-lg hover:bg-gray-100" onclick="saveContent()">Save</button>
          </div>
        </div>
      `;
      document.body.appendChild(options);
    }

    function shareContent() {
      if (navigator.share) {
        navigator.share({
          title: 'Travel App',
          text: 'Check out this amazing travel destination!',
          url: window.location.href
        });
      } else {
        alert('Sharing content - Coming soon!');
      }
    }

    function reportContent() {
      alert('Report content - Coming soon!');
    }

    function saveContent() {
      alert('Content saved!');
    }

    function showBookingModal() {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      modal.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 max-w-md w-full">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">Book Your Trip</h3>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-500 text-xl">×</button>
          </div>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2">Travel Dates</label>
              <input type="date" class="w-full p-2 border border-gray-300 rounded-lg">
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">Number of Guests</label>
              <select class="w-full p-2 border border-gray-300 rounded-lg">
                <option>1 Guest</option>
                <option>2 Guests</option>
                <option>3 Guests</option>
                <option>4+ Guests</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">Package Type</label>
              <select class="w-full p-2 border border-gray-300 rounded-lg">
                <option>Basic Package</option>
                <option>Premium Package</option>
                <option>Luxury Package</option>
              </select>
            </div>
            <button class="w-full bg-green-700 text-white py-3 rounded-lg font-semibold" onclick="confirmBooking()">Confirm Booking</button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }

    function confirmBooking() {
      alert('Booking confirmed! You will receive a confirmation email shortly.');
      // Close modal
      document.querySelector('.fixed.inset-0').remove();
    }

    function showSettings() {
      alert('Settings - Coming soon!');
    }

    function showUserProfile(userName) {
      const profile = document.createElement('div');
      profile.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
      profile.innerHTML = `
        <div class="bg-white rounded-2xl p-6 m-4 max-w-sm w-full">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold">${userName}</h3>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-500 text-xl">×</button>
          </div>
          <div class="text-center">
            <img src="https://storage.googleapis.com/a1aa/image/751e2870-c5c0-40f4-8245-611694a467ba.jpg" class="w-20 h-20 rounded-full mx-auto mb-4" alt="Profile">
            <h4 class="font-bold text-lg">${userName}</h4>
            <p class="text-gray-600">Travel Enthusiast</p>
            <div class="mt-4 space-y-2">
              <button class="w-full bg-green-700 text-white py-2 rounded-lg">Follow</button>
              <button class="w-full border border-gray-300 py-2 rounded-lg">Message</button>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(profile);
    }

    function loadUserPreferences() {
      // Load user preferences from localStorage
      const savedLikes = localStorage.getItem('travelAppLikes');
      if (savedLikes) {
        likes = JSON.parse(savedLikes);
      }
    }

    function saveUserPreferences() {
      // Save user preferences to localStorage
      localStorage.setItem('travelAppLikes', JSON.stringify(likes));
    }

    // Touch event handling for better mobile experience
    document.addEventListener('touchstart', function(e) {
      if (e.target.closest('button')) {
        e.target.closest('button').classList.add('active');
      }
    });

    document.addEventListener('touchend', function(e) {
      if (e.target.closest('button')) {
        e.target.closest('button').classList.remove('active');
      }
    });

    // Prevent zoom on double tap for mobile
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (event) {
      const now = (new Date()).getTime();
      if (now - lastTouchEnd <= 300) {
        event.preventDefault();
      }
      lastTouchEnd = now;
    }, false);
  </script>
 </body>
</html>
